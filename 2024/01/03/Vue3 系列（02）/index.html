<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Vue,Vue3," />










<meta name="description" content="pinia 集成管理pinia在 Vue 中主要充当状态管理的角色，所谓状态管理简单说就是存储数据，存储在pinia中的数据允许我们在各个组件使用。例如用户登录成功以后我们需要将用户的相关信息保存起来，其它的页面也有可能需要使用用户的信息，这就是一个典型的跨组件访问数据的案例。 安装并集成直接使用命令npm i pinia安装pinia；接着我们在main.ts里面创建pinia对象并挂载到 Vu">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue3 系列（02）">
<meta property="og:url" content="http://example.com/2024/01/03/Vue3%20%E7%B3%BB%E5%88%97%EF%BC%8802%EF%BC%89/index.html">
<meta property="og:site_name" content="Luyan&#39;s Bolg">
<meta property="og:description" content="pinia 集成管理pinia在 Vue 中主要充当状态管理的角色，所谓状态管理简单说就是存储数据，存储在pinia中的数据允许我们在各个组件使用。例如用户登录成功以后我们需要将用户的相关信息保存起来，其它的页面也有可能需要使用用户的信息，这就是一个典型的跨组件访问数据的案例。 安装并集成直接使用命令npm i pinia安装pinia；接着我们在main.ts里面创建pinia对象并挂载到 Vu">
<meta property="og:locale">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708754859108-eb6f53f1-196a-4943-b8a1-4927b7399b9c.png#averageHue=%2370c1df&clientId=u88c9409e-bcca-4&from=paste&height=391&id=u3d0a3e34&originHeight=391&originWidth=1281&originalType=binary&ratio=1&rotation=0&showTitle=false&size=197576&status=done&style=none&taskId=u7329f2bb-5750-4647-954a-5a2b2e1d586&title=&width=1281">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708850316323-d5c308bd-1858-4b56-83a2-23e3fcdcd4a5.png#averageHue=%23f3e5c2&clientId=u55691e50-1a3c-4&from=paste&height=333&id=u58c9e6ff&originHeight=333&originWidth=563&originalType=binary&ratio=1&rotation=0&showTitle=false&size=27719&status=done&style=none&taskId=udd504c6e-9053-44ab-8f4a-de24be191d1&title=&width=563">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708869400776-56ea6a7b-adc7-4a90-bd76-1b7ee1bfd8c7.png#averageHue=%239ff4cd&clientId=u55691e50-1a3c-4&from=paste&height=326&id=u74de91c5&originHeight=326&originWidth=621&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10685&status=done&style=none&taskId=u8402e80e-950c-449b-8d4c-d4bd6f727b7&title=&width=621">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708870917976-1fcaf683-6045-4922-bd4f-f17328f8fff6.png#averageHue=%23aff1cb&clientId=u55691e50-1a3c-4&from=paste&height=401&id=u9b90b64f&originHeight=597&originWidth=128&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6271&status=done&style=none&taskId=ud6e3368c-08dd-4d7e-959e-ee2098f2f3f&title=&width=86">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708870939130-971df0a8-5914-468f-8c2b-b7a8f59e4401.png#averageHue=%23aff0ca&clientId=u55691e50-1a3c-4&from=paste&height=400&id=u8dc57c3f&originHeight=597&originWidth=127&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7193&status=done&style=none&taskId=u07f27863-c9c9-4404-b436-9dd60638919&title=&width=85">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708871559637-a8436eb3-4dc0-4102-9334-c1e322e2e74d.png#averageHue=%23b2f2cd&clientId=u55691e50-1a3c-4&from=paste&height=405&id=fwx3b&originHeight=693&originWidth=601&originalType=binary&ratio=1&rotation=0&showTitle=false&size=23408&status=done&style=none&taskId=u16321ae6-ae06-4d4c-b495-a02811b6508&title=&width=351">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708871718814-33f00893-9c22-42d1-8e5b-2a0aee582dcd.png#averageHue=%23a6f3cd&clientId=u55691e50-1a3c-4&from=paste&height=311&id=u48f42724&originHeight=311&originWidth=602&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10586&status=done&style=none&taskId=ue56cb0b5-fd6b-4ec7-9367-2245ae382cf&title=&width=602">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708871729517-ed5d4482-45b5-4609-a2ad-dd4b04d4b79f.png#averageHue=%23a6f3cd&clientId=u55691e50-1a3c-4&from=paste&height=400&id=u0f664aa4&originHeight=469&originWidth=599&originalType=binary&ratio=1&rotation=0&showTitle=false&size=17325&status=done&style=none&taskId=u6cc2e22a-f82a-48c1-abf6-25f7eb0ab5c&title=&width=511">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708872558306-1c698298-f92e-4b9d-bc35-4454982e05b0.png#averageHue=%2359fecf&clientId=u55691e50-1a3c-4&from=paste&height=507&id=u8e2de372&originHeight=507&originWidth=598&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13406&status=done&style=none&taskId=u14ce1624-15f0-4c21-ad4b-944c14143c2&title=&width=598">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708872655439-9546c4fb-1f62-4712-9a2a-8b280ef58d04.png#averageHue=%23b3f1cb&clientId=u55691e50-1a3c-4&from=paste&height=246&id=Z1VG9&originHeight=246&originWidth=599&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6620&status=done&style=none&taskId=u4b52a577-98eb-404e-bda9-80a44373e7b&title=&width=599">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708872601508-05f20817-526d-4121-a7d7-07781c14af4c.png#averageHue=%2393f6ce&clientId=u55691e50-1a3c-4&from=paste&height=509&id=uae552e14&originHeight=509&originWidth=597&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14096&status=done&style=none&taskId=u2dd94120-3c2c-4f3d-85cc-0027a89fe93&title=&width=597">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708873614340-76f657ce-8fbf-49a0-b7fb-836988b7e6b0.png#averageHue=%23a0f1ca&clientId=u55691e50-1a3c-4&from=paste&height=151&id=xlmfk&originHeight=151&originWidth=601&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8506&status=done&style=none&taskId=u9b7d3a25-8a4b-47c0-8555-477284871e2&title=&width=601">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708954455731-d53debfd-19b0-48e5-9127-60303ebfb899.png#averageHue=%23f6e6bb&clientId=ud2311a5d-5ed6-4&from=paste&height=208&id=u503bcec2&originHeight=229&originWidth=602&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=7937&status=done&style=none&taskId=u056a05e1-c060-4ae8-814c-c990e56ae74&title=&width=547.2727154109106">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708962633039-279f332e-dc80-4724-9657-d43e558db0de.png#averageHue=%23fbf2e5&clientId=ud2311a5d-5ed6-4&from=paste&height=219&id=szzB9&originHeight=241&originWidth=343&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=6561&status=done&style=none&taskId=u9dff5668-6dcb-437e-b386-d40ab339710&title=&width=311.8181750597049">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1709001465897-c93fa9a6-7a49-4514-b0ad-28e273a2106b.png#averageHue=%2300ffff&clientId=u55691e50-1a3c-4&from=paste&height=249&id=u87716ae0&originHeight=249&originWidth=598&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6167&status=done&style=none&taskId=u3225e199-22a4-48af-8bd0-05a7faf1335&title=&width=598">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1709003831899-a944a657-ee07-47b3-be37-f56e214db7e0.png#averageHue=%2360f5e8&clientId=u55691e50-1a3c-4&from=paste&height=250&id=ue4277758&originHeight=250&originWidth=598&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8644&status=done&style=none&taskId=u34356611-fc0b-4219-b76f-560fcf4606b&title=&width=598">
<meta property="article:published_time" content="2024-01-03T09:33:49.000Z">
<meta property="article:modified_time" content="2024-08-02T04:03:07.124Z">
<meta property="article:author" content="Lu Yan">
<meta property="article:tag" content="Vue">
<meta property="article:tag" content="Vue3">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708754859108-eb6f53f1-196a-4943-b8a1-4927b7399b9c.png#averageHue=%2370c1df&clientId=u88c9409e-bcca-4&from=paste&height=391&id=u3d0a3e34&originHeight=391&originWidth=1281&originalType=binary&ratio=1&rotation=0&showTitle=false&size=197576&status=done&style=none&taskId=u7329f2bb-5750-4647-954a-5a2b2e1d586&title=&width=1281">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://example.com/2024/01/03/Vue3 系列（02）/"/>





  <title>Vue3 系列（02） | Luyan's Bolg</title>
  








<meta name="generator" content="Hexo 7.3.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Luyan's Bolg</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">不积跬步，无以至千里；不积小流，无以成江海。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/index.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/01/03/Vue3%20%E7%B3%BB%E5%88%97%EF%BC%8802%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Luyan's Bolg">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Vue3 系列（02）</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-03T17:33:49+08:00">
                2024-01-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="pinia-集成管理"><a href="#pinia-集成管理" class="headerlink" title="pinia 集成管理"></a>pinia 集成管理</h3><p><code>pinia</code>在 Vue 中主要充当状态管理的角色，所谓状态管理简单说就是存储数据，存储在<code>pinia</code>中的数据允许我们在各个组件使用。例如用户登录成功以后我们需要将用户的相关信息保存起来，其它的页面也有可能需要使用用户的信息，这就是一个典型的跨组件访问数据的案例。</p>
<h4 id="安装并集成"><a href="#安装并集成" class="headerlink" title="安装并集成"></a>安装并集成</h4><p>直接使用命令<code>npm i pinia</code>安装<code>pinia</code>；<br>接着我们在<code>main.ts</code>里面创建<code>pinia</code>对象并挂载到 Vue 中：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &quot;vue&quot;;</span><br><span class="line">import App from &quot;./App.vue&quot;;</span><br><span class="line">import &#123; createPinia &#125; from &#x27;pinia&#x27;</span><br><span class="line"></span><br><span class="line">const app = createApp(App)</span><br><span class="line">const pinia = createPinia()  // 创建 pinia 对象</span><br><span class="line">app.use(pinia)  // 安装到 app 中</span><br><span class="line">app.mount(&quot;#app&quot;);</span><br></pre></td></tr></table></figure>
<h4 id="存储并读取数据"><a href="#存储并读取数据" class="headerlink" title="存储并读取数据"></a>存储并读取数据</h4><h5 id="存储数据"><a href="#存储数据" class="headerlink" title="存储数据"></a>存储数据</h5><p>根据规范我们会在<code>src</code>目录下创建<code>store</code>目录用来存储相关的 TS 文件，TS 文件的命名要见名知义，例如存储用户信息的我们可以使用<code>user.ts</code>。<code>user.ts</code>样例代码如下：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 defineStore 定义一个 store 并 export 出去</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;user&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;1001&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>defineStore</code>的第一个参数是一个字符串，它是<code>store</code>的唯一标识；第二个参数是一个配置项，存储的数据需要写在<code>state</code>函数的返回值里。</p>
<h5 id="读取数据"><a href="#读取数据" class="headerlink" title="读取数据"></a>读取数据</h5><p>假设我想在<code>User.vue</code>组件里想要访问用户的信息，组件内部可以：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;user&quot;&gt;</span><br><span class="line">        &lt;p&gt;ID：&#123;&#123; userStore.id &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;姓名：&#123;&#123; userStore.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;年龄：&#123;&#123; userStore.age &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;    </span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123; useUserStore &#125; from &#x27;@/store/user&#x27;</span><br><span class="line"></span><br><span class="line">    // useUserStore() 函数的返回值是一个 store 对象</span><br><span class="line">    // 存储的数据都会作为这个对象的属性存在</span><br><span class="line">    let userStore = useUserStore()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h4 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h4><h5 id="方式一"><a href="#方式一" class="headerlink" title="方式一"></a>方式一</h5><p>直接操作<code>store</code>对象，这是最简单的方式：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 直接操作 store 对象的 name 属性修改</span></span><br><span class="line">userStore.<span class="property">name</span> = <span class="string">&#x27;李四&#x27;</span></span><br></pre></td></tr></table></figure>
<h5 id="方式二"><a href="#方式二" class="headerlink" title="方式二"></a>方式二</h5><p>当要操作的属性比较多的时候，按照方式一的写法代码比较臃肿。<code>pinia</code>给我们提供<code>patch</code>的方式批量修改数据：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">userStore.$patch(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;1002&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;王五&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>$patch</code>函数传进去一个对象，对象里面就是要修改的数据。但是请注意，传的数据必须是定义在<code>store</code>里面，例如你传一个<code>score</code>会报错。</p>
<h5 id="方式三"><a href="#方式三" class="headerlink" title="方式三"></a>方式三</h5><p><code>pinia</code>还给我们提供<code>actions</code>用来操作存储的数据，首先我们在<code>store</code>里面配置：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;user&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">actions</span>: &#123;  <span class="comment">// actions 里面定义若干函数操作数据</span></span><br><span class="line">        <span class="title function_">addAge</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">age</span> &lt; <span class="number">20</span>) &#123;  <span class="comment">// 访问数据的时候需要 this.</span></span><br><span class="line">                ++<span class="variable language_">this</span>.<span class="property">age</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;1001&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>我们定义好<code>actions</code>之后就可以直接通过<code>store</code>对象调用这些函数：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useUserStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/store/user&#x27;</span></span><br><span class="line"><span class="keyword">let</span> userStore = <span class="title function_">useUserStore</span>()  <span class="comment">// 创建 store 对象</span></span><br><span class="line">userStore.<span class="title function_">addAge</span>()  <span class="comment">// 调用 addAge 函数</span></span><br></pre></td></tr></table></figure>
<p>如果只是为了修改属性而使用<code>actions</code>就比较麻烦，一般<code>actions</code>的应用场景是修改属性的逻辑比较复杂的时候，例如我们这边修改年龄的逻辑里面有一个判断。</p>
<h4 id="storeToRefs"><a href="#storeToRefs" class="headerlink" title="storeToRefs"></a>storeToRefs</h4><p>目前我们访问数据还是使用<code>userStore.</code>的方式，这个比较麻烦。于是出现下面的代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let &#123;id, name, age&#125; = useUserStore()</span><br></pre></td></tr></table></figure>
<p>其实就是解包，但问题是这样解出来的数据会丢失响应式。理所当然想到：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let &#123;id, name, age&#125; = toRefs(useUserStore())</span><br></pre></td></tr></table></figure>
<p>这样出来的数据会变为<code>Ref</code>对象，仍然具备响应式。但是<code>toRefs</code>会将<code>useUserStore()</code>返回对象里面的所有属性都变为<code>Ref</code>，这是不合理的。因为我们只想将自定义的数据变为响应式，这可以：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import &#123; storeToRefs &#125; from &#x27;pinia&#x27;</span><br><span class="line">let &#123;id, name, age&#125; = storeToRefs(useUserStore())</span><br></pre></td></tr></table></figure>
<p>因此我们的标准写法是使用<code>storeToRefs</code>。</p>
<h4 id="getters"><a href="#getters" class="headerlink" title="getters"></a>getters</h4><p><code>pinia</code>还给我们提供了<code>getters</code>功能，可以在获取数据的时候做些操作。首先我们需要在<code>defineStore</code>的配置项里面添加<code>getters</code>配置项，如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">getters: &#123;</span><br><span class="line">    father(): string &#123;</span><br><span class="line">        return this.name + &#x27;父亲&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    mother(state) &#123;</span><br><span class="line">        return state.name + &#x27;母亲&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>getters</code>里面定义若干函数，函数可以有一个参数<code>state</code>，我们定义的所有数据都是在这个<code>state</code>里面。<br>除了通过参数<code>state</code>获取定义的数据，还可以使用<code>this</code>关键字获取，如果定义的函数没有参数，则需要指明函数的返回值类型。</p>
<h4 id="订阅"><a href="#订阅" class="headerlink" title="订阅"></a>订阅</h4><p><code>pinia</code>还给我提供了订阅功能，可以监视<code>store</code>的改变。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const userStore = useUserStore()</span><br><span class="line">userStore.$subscribe((_, state)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;用户发生变化&#x27;, state)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>第一个参数一般用不到所以直接定义为<code>_</code>，第二个参数<code>state</code>存着我们定义的所有数据。<br>一个通用的场景是持久化，我们可以在数据发生变化的时候将数据存到<code>localStorage</code>里面，<code>store</code>对象初始化数据的时候也从<code>localStorage</code>里面读取。</p>
<h4 id="组合式写法"><a href="#组合式写法" class="headerlink" title="组合式写法"></a>组合式写法</h4><p><code>store</code>的定义还有组合式写法，看下面例子：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;user&#x27;</span>, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> userInfo = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;1001&#x27;</span>, </span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">changeUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">    userInfo.<span class="property">id</span> = <span class="string">&#x27;1002&#x27;</span></span><br><span class="line">    userInfo.<span class="property">name</span> = <span class="string">&#x27;李四&#x27;</span></span><br><span class="line">    userInfo.<span class="property">age</span> = <span class="number">20</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;user.ts&#x27;</span>, userInfo.<span class="property">name</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;userInfo, changeUser&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>本来传配置项的地方现在改为一个函数，函数里面定义数据和函数，然后通过返回值返回。</p>
<h3 id="组件通信"><a href="#组件通信" class="headerlink" title="组件通信"></a>组件通信</h3><h4 id="props-方式"><a href="#props-方式" class="headerlink" title="props 方式"></a>props 方式</h4><p><code>props</code>主要用于父子组件间的通信，父组件向子组件传递数据是<a href="#Q0ijS">2.10</a>着重讲的内容。那么子组件想要通过<code>props</code>传递数据给父组件怎么做？其实很简单，父组件先定义一个函数，然后将这个函数通过<code>props</code>传给子组件，子组件将要传的数据作为参数调用这个函数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;p&gt;父组件&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;自己的车：&#123;&#123; car &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;儿子的玩具：&#123;&#123; toy &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;Child :car=&quot;car&quot; :sendToy=&quot;getToy&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">    import Child from &#x27;./Child.vue&#x27;</span><br><span class="line"></span><br><span class="line">    let car = ref(&#x27;奔驰&#x27;)</span><br><span class="line">    let toy = ref(&#x27;&#x27;)</span><br><span class="line">    function getToy(t: string) &#123;</span><br><span class="line">        toy.value = t</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;p&gt;子组件&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;父亲的车：&#123;&#123; car &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;我的玩具：&#123;&#123; toy &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;button @click=&quot;sendToy(toy)&quot;&gt;把玩具传给父组件&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">    defineProps([&#x27;car&#x27;, &#x27;sendToy&#x27;])</span><br><span class="line">    let toy = ref(&#x27;奥特曼&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h4 id="自定义事件"><a href="#自定义事件" class="headerlink" title="自定义事件"></a>自定义事件</h4><p>自定义事件主要用于子组件传递数据给父组件，我们知道系统中定义了一些常见的事件例如点击、键盘按动、鼠标滑动等，除此之外 Vue 还支持自定义事件。例如，我们在写子组件标签的时候为其添加一个<code>get-toy</code>事件可以这样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Child @get-toy=&quot;getToy&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>这个事件触发时执行的<code>getToy</code>函数是定义在父组件里面的，如果子组件能够在合适的时机触发这个事件那不就可以通过参数给父组件传数据了吗？那子组件该怎么和触发这个自定义事件呢？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="variable">emit</span> <span class="operator">=</span> defineEmits([<span class="string">&#x27;get-toy&#x27;</span>])  <span class="comment">// 声明 get-toy 事件</span></span><br><span class="line">emit(<span class="string">&#x27;get-toy&#x27;</span>, toy.value)  <span class="comment">// 触发事件并传参</span></span><br></pre></td></tr></table></figure>
<h4 id="mitt"><a href="#mitt" class="headerlink" title="mitt"></a>mitt</h4><p><code>mitt</code>可以实现任意组件的通信，基本原理就是找一个中间人，接收数据的组件往中间人上绑定一个事件，发送数据的组件触发这个事件并将数据作为参数传递过去。<br>想要使用<code>mitt</code>，我们首先需要：</p>
<ol>
<li>使用命令<code>npm i mitt</code>安装这个模块</li>
<li>在<code>src</code>目录下创建<code>tools</code>或<code>utils</code>目录，这是一个规范不强制</li>
<li>接着在<code>tools/utils</code>目录下创建 TS 文件，我们这边就创建<code>emitter.ts</code><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&#x27;mitt&#x27;</span></span><br><span class="line"><span class="keyword">const</span> emitter = <span class="title function_">mitt</span>()  <span class="comment">// 这就是上面说的中间人</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> emitter  <span class="comment">// 将其暴露出去，其它组件才能访问它</span></span><br></pre></td></tr></table></figure>
需要接收数据的组件在<code>emitter</code>上绑定事件如下：<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&#x27;@/tools/emitter&#x27;</span></span><br><span class="line"><span class="comment">// 绑定 send-toy 事件，并设置需要一个参数</span></span><br><span class="line">emitter.<span class="title function_">on</span>(<span class="string">&#x27;send-toy&#x27;</span>, <span class="function">(<span class="params"><span class="attr">value</span>:<span class="built_in">any</span></span>)=&gt;</span>&#123;</span><br><span class="line">    toy.<span class="property">value</span> = value</span><br><span class="line">&#125;)</span><br><span class="line"><span class="title function_">onUnmounted</span>(<span class="function">()=&gt;</span>&#123;  <span class="comment">// 组件被卸载时应该取消绑定这个事件</span></span><br><span class="line">    emitter.<span class="title function_">off</span>(<span class="string">&#x27;send-toy&#x27;</span>)  <span class="comment">// 取消指定事件</span></span><br><span class="line">    emitter.<span class="property">all</span>.<span class="title function_">clear</span>()  <span class="comment">// 取消所有事件</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
需要发送数据的组件在合适的时机触发这个事件并将数据作为参数传过去即可：<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&#x27;@/tools/emitter&#x27;</span></span><br><span class="line">emitter.<span class="title function_">emit</span>(<span class="string">&#x27;send-toy&#x27;</span>, toy)  <span class="comment">// 触发 send-toy 事件并将数据传过去</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h4><p>我们会经常使用<code>v-model</code>将变量与输入框双向绑定，其实也可以对自定义组件使用<code>v-model</code>。不过这个自定义组件一般也是封装的输入框，因为用户能修改的一般也只有输入框。<br>首先我们需要明白双向绑定的本质，下面的两种写法是完全等价的：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">MyInput</span> v-model=<span class="string">&quot;username&quot;</span> /&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">MyInput</span> <span class="attr">:modelValue</span>=<span class="string">&quot;username&quot;</span> @<span class="attr">update:modelValue</span>=<span class="string">&quot;username = $event&quot;</span> /&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>对一个自定义组件做<code>v-model</code>，实际上会添加<code>modelValue</code>属性和<code>update:modelValue</code>事件（事件的命名可以有<code>:</code>）。子组件<code>MyInput</code>代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;input </span><br><span class="line">        type=&quot;text&quot;</span><br><span class="line">        :value=&quot;modelValue&quot;</span><br><span class="line">        @input=&quot;emit(&#x27;update:modelValue&#x27;, $event.target.value)&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    defineProps([&#x27;modelValue&#x27;])</span><br><span class="line">    const emit = defineEmits([&#x27;update:modelValue&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>首先通过获取属性传过来的值并显示，然后当内部的输入框发生变化的时候再通过触发自定义事件将值带回去。父组件接受到新的值后，将值设置到变量中，于是就实现了双向绑定。<br>在原生事件里面<code>$event</code>表示的是事件对象，在自定义事件里<code>$event</code>就是触发事件时传递的值。<br>上面<code>v-model</code>的默认属性是<code>modelValue</code>，我们可以修改这个属性，语法很简单：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyInput v-model:name=&quot;username&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>这边修改之后，子组件获取的属性和自定义方法就变成了<code>name</code>和<code>update:name</code>。一般来说没必要修改，但在需要双向绑定多个变量的情况下就很有用了。</p>
<h4 id="attrs"><a href="#attrs" class="headerlink" title="$attrs"></a>$attrs</h4><p><code>$attrs</code>一般用于祖孙组件互传数据，当我们通过属性给子组件传递消息的时候，子组件需要通过<code>defineProps</code>声明才能使用该变量。父组件通过属性传递的数据，未被子组件使用<code>defineProps</code>声明的变量会放到<code>$attrs</code>里面。所以我们可以将这些数据再通过属性传给孙组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;GrandChild v-bind=&quot;$attrs&quot; /&gt;</span><br><span class="line">&lt;!-- 假设 $attrs 里面装着属性 x 和 y，那么上面等价下面 --&gt;</span><br><span class="line">&lt;GrandChild :x=&quot;x&quot; :y=&quot;y&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p><code>v-bind</code>里面可以传一个对象，相当于将对象里面的值通过属性传递给子组件。因此孙组件就可以使用<code>defineProps</code>声明并使用这些变量。<br>这样就可以借助子组件使用<code>$attrs</code>实现祖到孙的通信，那么孙怎么传数据给祖呢？很简单，祖组件可以传递一个函数给孙组件，然后孙组件调用这个函数并将数据作为参数传递到祖。具体实现比较简单就不演示了。</p>
<h4 id="refs-和-parent"><a href="#refs-和-parent" class="headerlink" title="$refs 和 $parent"></a>$refs 和 $parent</h4><h5 id="refs"><a href="#refs" class="headerlink" title="$refs"></a>$refs</h5><p><a href="#pW963">2.8.3</a>讲过给子组件加<code>ref</code>属性，父组件只需要声明一个同名的空<code>ref()</code>就可以拿到子组件对象。如果组件内有较多的子组件需要去获取，我们就需要定义多个空<code>ref()</code>变量，而且操作起来也需要挨个操作。那能不能批量获取子组件并进行批量操作呢？其实是可以的，我们在父组件里面可以使用<code>$refs</code>获取所有的子组件对象，想要批量操作还可以使用循环：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">        &lt;p&gt;父组件&lt;/p&gt;</span><br><span class="line">        &lt;!-- 通过 ref 属性给子组件命名 --&gt;</span><br><span class="line">        &lt;Child1 ref=&quot;c1&quot; /&gt;</span><br><span class="line">        &lt;Child2 ref=&quot;c2&quot; /&gt;</span><br><span class="line">        &lt;!-- 通过函数调用将 $refs 传给 JS 脚本 --&gt;</span><br><span class="line">        &lt;button @click=&quot;getChildren($refs)&quot;&gt;增加子组件的书本数目&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import Child1 from &#x27;./Child1.vue&#x27;</span><br><span class="line">    import Child2 from &#x27;./Child2.vue&#x27;</span><br><span class="line"></span><br><span class="line">    // 这边的 refs 就是模板里的 $refs，这是一个对象，里面装着所有命名的子组件 </span><br><span class="line">    function getChildren(refs: any) &#123;</span><br><span class="line">        for (let key in refs) &#123;  // 遍历所有子组件</span><br><span class="line">            refs[key].bookNum += 2</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>有几个注意点：</p>
<ol>
<li>所有的<code>$</code>开头的变量都只能在模板里访问，JS 想要访问需要通过模板调用函数传参的方式</li>
<li>通过<code>$refs</code>能够获取的组件必须定义<code>ref</code>属性，否则是找不到的</li>
<li>例子里面父组件访问子组件的<code>bookNum</code>变量，那么子组件必须将其使用<code>defineExpose(&#123;bookNum&#125;)</code>暴露出来</li>
</ol>
<h5 id="parent"><a href="#parent" class="headerlink" title="$parent"></a>$parent</h5><p>子组件可以通过<code>$parent</code>获取父组件对象，当然也要通过模板传给 JS 脚本。拿到父组件对象就可以操作父组件的一些变量，前提是父组件将这些变量使用<code>defineExpose</code>暴露出来：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;child&quot;&gt;</span><br><span class="line">        &lt;p&gt;子组件&lt;/p&gt;</span><br><span class="line">        &lt;button @click=&quot;addHouse($parent)&quot;&gt;修改父组件数据&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    function addHouse(parent: any) &#123;</span><br><span class="line">        parent.houseNum++</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h4 id="provide-和-inject"><a href="#provide-和-inject" class="headerlink" title="provide 和 inject"></a>provide 和 inject</h4><p><code>provide</code>与<code>inject</code>可以实现子孙后代之间通信，父组件通过<code>provide</code>提供数据，后代组件通过<code>inject</code>接收数据。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 以下是祖先组件内容 */</span></span><br><span class="line"><span class="keyword">import</span> &#123;ref, provide&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> money = <span class="title function_">ref</span>(<span class="number">100</span>)</span><br><span class="line"><span class="title function_">provide</span>(<span class="string">&#x27;money&#x27;</span>, money)  <span class="comment">// 祖先组件使用 provide 传递数据，两个参数分别是键与值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 以下是后代组件内容 */</span></span><br><span class="line"><span class="keyword">import</span> &#123; inject &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">let</span> money = <span class="title function_">inject</span>(<span class="string">&#x27;money&#x27;</span>, <span class="number">0</span>)  <span class="comment">// inject 函数两个参数分别是键和默认值</span></span><br></pre></td></tr></table></figure>
<p>关于这种方式实现的子孙通信有一些注意点：</p>
<ol>
<li>如果父组件传递的数据是响应式的，那么子组件接收到的也是响应式的且两者是同一个对象，即子组件修改数据对父组件是可见的</li>
<li>子组件接收数据时会选择就近原则，即爷组件传递数据，父组件传递同名数据，子组件接收的时候会选择父组件的数据</li>
<li>祖先传递的数据可以被多个子孙<code>inject</code>，不存在截断现象</li>
</ol>
<h4 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h4><h5 id="默认插槽"><a href="#默认插槽" class="headerlink" title="默认插槽"></a>默认插槽</h5><p>假设我们要做下图的效果：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708754859108-eb6f53f1-196a-4943-b8a1-4927b7399b9c.png#averageHue=%2370c1df&clientId=u88c9409e-bcca-4&from=paste&height=391&id=u3d0a3e34&originHeight=391&originWidth=1281&originalType=binary&ratio=1&rotation=0&showTitle=false&size=197576&status=done&style=none&taskId=u7329f2bb-5750-4647-954a-5a2b2e1d586&title=&width=1281" alt="image.png"><br>父组件里面有两个子组件，这两个子组件不完全一样。一个想法是写两个<code>.vue</code>文件表示两个组件，但是没必要，因为图中两个子组件的大体结构是一样的。那我们在子组件里面使用<code>v-if</code>或<code>v-show</code>来选择性展示？可以，但是很麻烦。更优雅的解决方案是使用插槽，父组件内的代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">        &lt;p&gt;父组件&lt;/p&gt;</span><br><span class="line">        &lt;div class=&quot;content&quot;&gt;</span><br><span class="line">            &lt;Child title=&quot;热门游戏列表&quot;&gt;</span><br><span class="line">                &lt;ul&gt;</span><br><span class="line">                    &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">            &lt;/Child&gt;</span><br><span class="line">            &lt;Child title=&quot;每日好图&quot;&gt;</span><br><span class="line">                &lt;MyImage/&gt;</span><br><span class="line">            &lt;/Child&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123;ref, reactive&#125; from &#x27;vue&#x27;</span><br><span class="line">    import Child from &#x27;./Child.vue&#x27;</span><br><span class="line">    import MyImage from &#x27;./MyImage.vue&#x27;</span><br><span class="line"></span><br><span class="line">    let games = reactive([</span><br><span class="line">        &#123;id: &#x27;1001&#x27;, name: &#x27;交错战线&#x27;&#125;,</span><br><span class="line">        &#123;id: &#x27;1002&#x27;, name: &#x27;王者荣耀&#x27;&#125;,</span><br><span class="line">        &#123;id: &#x27;1003&#x27;, name: &#x27;英雄联盟&#x27;&#125;,</span><br><span class="line">        &#123;id: &#x27;1004&#x27;, name: &#x27;斗罗大陆&#x27;&#125;,</span><br><span class="line">    ])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>这个代码很简单，只不过我们在自定义组件内部写上了其它标签（可以是原生标签，也可以是自定义组件）。这些写在标签内部的内容默认并不会展现出来，因为 Vue 不知道将这些内容展示在什么地方。因此需要我们在子组件内开启插槽：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;child&quot;&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123; title &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;!-- 插槽标签，后续在本组件标签内部写东西会展现在这 --&gt;</span><br><span class="line">        &lt;slot&gt;默认内容&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    defineProps([&#x27;title&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>关于插槽有两个注意点：</p>
<ol>
<li>如果定义了多个插槽标签，那么传递的内容会展示多次。</li>
<li>我们在组件内定义了插槽，但是使用的时候没有传递内容会展示插槽内部的默认内容。</li>
</ol>
<h5 id="具名插槽"><a href="#具名插槽" class="headerlink" title="具名插槽"></a>具名插槽</h5><p>一般默认插槽只会定义一个，毕竟定义多个也只是将内容多复制几遍。如果我们确实想要通过插槽插入多个不同的内容该怎么做？此时可以给每一个插槽命名，然后插入的时候指定插入到哪一个插槽。<br>子组件可以通过<code>name</code>属性给插槽命名：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;child&quot;&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123; title &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;!-- 给插槽起名叫 content --&gt;</span><br><span class="line">        &lt;slot name=&quot;content&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    defineProps([&#x27;title&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>父组件使用的时候给内容指定具体的插槽：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Child</span> <span class="attr">title</span>=<span class="string">&quot;热门游戏列表&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 使用 “v-slot:插槽名” 语法指定插槽 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:content</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;g in games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;g.id&quot;</span>&gt;</span>&#123;&#123; g.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Child</span> <span class="attr">title</span>=<span class="string">&quot;每日好图&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 语法糖，指定插槽可以简写成 “#插槽名” --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> #<span class="attr">content</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">MyImage</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;ref, reactive&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&#x27;./Child.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> <span class="title class_">MyImage</span> <span class="keyword">from</span> <span class="string">&#x27;./MyImage.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> games = <span class="title function_">reactive</span>([</span></span><br><span class="line"><span class="language-javascript">    &#123;<span class="attr">id</span>: <span class="string">&#x27;1001&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;交错战线&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123;<span class="attr">id</span>: <span class="string">&#x27;1002&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;王者荣耀&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123;<span class="attr">id</span>: <span class="string">&#x27;1003&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;英雄联盟&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123;<span class="attr">id</span>: <span class="string">&#x27;1004&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;斗罗大陆&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">  ])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>指定插槽的时候必须写在<code>template</code>标签上，因此往往需要包裹一层<code>&lt;template&gt;</code>。<br>学完具名插槽提一句，其实默认插槽也有名字，就叫做<code>default</code>。</p>
<h5 id="作用域插槽"><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h5><p>插槽出现的背景是父组件想要控制子组件的结构，上面的两种插槽都存在一个问题，那就是插槽的数据都是父组件维护。如果数据在子组件里面，但展示的格式由父组件决定，这个需求怎么实现？说白了就是子组件想给使用插槽的人传数据，子组件可以：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>每日游戏推荐<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 给 slot 标签加上属性，这个值会被传递给使用插槽的人 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">slot</span> <span class="attr">:games</span>=<span class="string">&quot;games&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> &#123;reactive&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> games = <span class="title function_">reactive</span>([</span></span><br><span class="line"><span class="language-javascript">        &#123;<span class="attr">id</span>: <span class="string">&#x27;1001&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;交错战线&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123;<span class="attr">id</span>: <span class="string">&#x27;1002&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;王者荣耀&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123;<span class="attr">id</span>: <span class="string">&#x27;1003&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;英雄联盟&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123;<span class="attr">id</span>: <span class="string">&#x27;1004&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;斗罗大陆&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">    ])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>父组件使用插槽的元素能够获取到传递的数据构成的对象：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Child</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 拿到的是所有数据构成的对象 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;params&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;g in params.games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;g.id&quot;</span>&gt;</span>&#123;&#123; g.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Child</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 接收数据的同时直接解包 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;&#123;games&#125;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;g in games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;g.id&quot;</span>&gt;</span>&#123;&#123; g.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&#x27;./Child.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>关于数据传递有几个要点：</p>
<ol>
<li>插槽可以传递若干个数据，例如<code>&lt;slot a=&quot;1&quot; b=&quot;2&quot;&gt;&lt;/slot&gt;</code>，使用插槽的人获取到的数据是这些属性构成的对象<code>&#123;a: &quot;1&quot;, b: &quot;2&quot;&#125;</code></li>
<li>对于具名插槽获取数据也是一样的写法<code>&lt;template v-slot:name=&quot;&#123;games&#125;&quot;&gt;</code></li>
</ol>
<h4 id="通信总结"><a href="#通信总结" class="headerlink" title="通信总结"></a>通信总结</h4><table>
<thead>
<tr>
<th><strong>组件关系</strong></th>
<th><strong>传递方式</strong></th>
</tr>
</thead>
<tbody><tr>
<td>父传子</td>
<td></td>
</tr>
</tbody></table>
<ol>
<li><code>props</code></li>
<li><code>v-model</code></li>
<li><code>$refs</code></li>
<li>默认插槽、具名插槽<br> |<br>| 子传父 | </li>
<li><code>props</code></li>
<li>自定义事件</li>
<li><code>v-model</code></li>
<li><code>$parent</code></li>
<li>作用域插槽<br> |<br>| 祖孙互传 | </li>
<li><code>$attrs</code></li>
<li><code>provide、inject</code><br> |<br>| 任意组件传递 | </li>
<li><code>pinia</code></li>
<li><code>mitt</code><br> |</li>
</ol>
<h3 id="其它-API"><a href="#其它-API" class="headerlink" title="其它 API"></a>其它 API</h3><h4 id="shallow"><a href="#shallow" class="headerlink" title="shallow"></a>shallow</h4><h5 id="shallowRef"><a href="#shallowRef" class="headerlink" title="shallowRef"></a>shallowRef</h5><p>之前学过使用<code>ref</code>定义响应式对象，对象里面一个属性发生变化都会展现在界面上。本节的<code>shallowRef</code>是浅层的<code>ref</code>，它只监听数据<code>.value</code>的变化，至于更深层次的属性变化不管。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Person1：&#123;&#123; person1 &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Person2：&#123;&#123; person2 &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName1&quot;</span>&gt;</span>修改person1姓名<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changePerson1&quot;</span>&gt;</span>修改整个person1<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName2&quot;</span>&gt;</span>修改person2姓名<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changePerson2&quot;</span>&gt;</span>修改整个person2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> &#123; ref, shallowRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> person1 = <span class="title function_">ref</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;)</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> person2 = <span class="title function_">shallowRef</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>&#125;)</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">changeName1</span>(<span class="params"></span>) &#123;  <span class="comment">// 响应式</span></span></span><br><span class="line"><span class="language-javascript">        person1.<span class="property">value</span>.<span class="property">name</span> += <span class="string">&#x27;~&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">changePerson1</span>(<span class="params"></span>) &#123;  <span class="comment">// 响应式</span></span></span><br><span class="line"><span class="language-javascript">        person1.<span class="property">value</span> = &#123;<span class="attr">name</span>: <span class="string">&quot;王五&quot;</span>, <span class="attr">age</span>: <span class="number">60</span>&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">changeName2</span>(<span class="params"></span>) &#123;  <span class="comment">// 非响应式！！！</span></span></span><br><span class="line"><span class="language-javascript">        person2.<span class="property">value</span>.<span class="property">name</span> += <span class="string">&#x27;!&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">changePerson2</span>(<span class="params"></span>) &#123;  <span class="comment">// 响应式</span></span></span><br><span class="line"><span class="language-javascript">        person2.<span class="property">value</span> = &#123;<span class="attr">name</span>: <span class="string">&quot;赵六&quot;</span>, <span class="attr">age</span>: <span class="number">80</span>&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>若一个响应式变量是<code>shallowRef</code>定义的，那么只能监听<code>.value</code>的修改，至于更深的<code>.value.name</code>的修改是监听不到的。</p>
<h5 id="shallowReactive"><a href="#shallowReactive" class="headerlink" title="shallowReactive"></a>shallowReactive</h5><p><code>reactive、shallowReactive</code>之间的关系与<code>ref、shallowRef</code>之间的关系很像，对于<code>reactive</code>定义的响应式对象，我们只能修改对象的属性，如果要改的内容比较多可以借助<code>Object.assign</code>批量赋值。<code>shallowReactive</code>定义的响应式对象可以监听第一层的属性变化，监听不到内层的属性变化。具体看一个例子：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Person1：&#123;&#123; person1 &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Person2：&#123;&#123; person2 &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeCar1Name&quot;</span>&gt;</span>修改person1车品牌<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeCar1&quot;</span>&gt;</span>修改整个person1整个车<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeCar2Name&quot;</span>&gt;</span>修改person2车品牌<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeCar2&quot;</span>&gt;</span>修改整个person2整个车<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> &#123; reactive, shallowReactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> person1 = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">car</span>: &#123;<span class="attr">brand</span>: <span class="string">&#x27;奔驰&#x27;</span>, <span class="attr">price</span>: <span class="number">100</span>&#125;&#125;)</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> person2 = <span class="title function_">shallowReactive</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>, <span class="attr">car</span>: &#123;<span class="attr">brand</span>: <span class="string">&#x27;宝马&#x27;</span>, <span class="attr">price</span>: <span class="number">80</span>&#125;&#125;)</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">changeCar1Name</span>(<span class="params"></span>) &#123;  <span class="comment">// 响应式</span></span></span><br><span class="line"><span class="language-javascript">        person1.<span class="property">car</span>.<span class="property">brand</span> = <span class="string">&#x27;爱玛&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">changeCar1</span>(<span class="params"></span>) &#123;  <span class="comment">// 响应式</span></span></span><br><span class="line"><span class="language-javascript">        person1.<span class="property">car</span> = &#123;<span class="attr">brand</span>: <span class="string">&#x27;丰田&#x27;</span>, <span class="attr">price</span>: <span class="number">10</span>&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">changeCar2Name</span>(<span class="params"></span>) &#123;  <span class="comment">// 非响应式！！！</span></span></span><br><span class="line"><span class="language-javascript">        person2.<span class="property">car</span>.<span class="property">brand</span> = <span class="string">&#x27;雅迪&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">changeCar2</span>(<span class="params"></span>) &#123;  <span class="comment">// 响应式</span></span></span><br><span class="line"><span class="language-javascript">        person2.<span class="property">car</span> = &#123;<span class="attr">brand</span>: <span class="string">&#x27;大众&#x27;</span>, <span class="attr">price</span>: <span class="number">20</span>&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>正如例子所呈现的，<code>shallowReactive</code>定义的<code>person</code>对象能监听<code>person.car</code>的变化但不能监听<code>person.car.brand</code>的变化。</p>
<h4 id="only"><a href="#only" class="headerlink" title="only"></a>only</h4><h5 id="readonly"><a href="#readonly" class="headerlink" title="readonly"></a>readonly</h5><p><code>readonly</code>用来生成一个响应式对象的只读副本，具体使用如下：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, <span class="keyword">readonly</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person1 = <span class="title function_">ref</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">car</span>: &#123;<span class="attr">brand</span>: <span class="string">&#x27;奔驰&#x27;</span>, <span class="attr">price</span>: <span class="number">100</span>&#125;&#125;)</span><br><span class="line"><span class="keyword">let</span> person2 = <span class="title function_">readonly</span>(person1)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下两种写法都是错误的，因为 person2 是只读的不能修改</span></span><br><span class="line">person2.<span class="property">value</span>.<span class="property">car</span>.<span class="property">brand</span> = <span class="string">&#x27;雅迪&#x27;</span></span><br><span class="line">person2.<span class="property">value</span>.<span class="property">car</span> = &#123;<span class="attr">brand</span>: <span class="string">&#x27;大众&#x27;</span>, <span class="attr">price</span>: <span class="number">20</span>&#125;</span><br></pre></td></tr></table></figure>
<p>使用<code>readonly</code>生成的对象副本和原来的对象是共通的，原来的对象修改数据对副本也是可见的。</p>
<h5 id="shallowReadonly"><a href="#shallowReadonly" class="headerlink" title="shallowReadonly"></a>shallowReadonly</h5><p><code>shallowReadonly</code>会为响应式对象生成一个浅只读副本，可以修改深层次的属性，不能修改浅层次的属性。具体来说对于<code>ref</code>定义的变量，不能修改<code>.value</code>但可以修改<code>.value.name</code>之类的；对于<code>reactive</code>定义的对象，不能修改<code>.car</code>但可以修改<code>.car.name</code>。</p>
<h4 id="raw"><a href="#raw" class="headerlink" title="raw"></a>raw</h4><h5 id="toRaw"><a href="#toRaw" class="headerlink" title="toRaw"></a>toRaw</h5><p><code>toRaw</code>能够获得响应式对象的非响应式形式，举个例子：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, toRaw &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person1 = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;)</span><br><span class="line"><span class="keyword">let</span> person2 = <span class="title function_">toRaw</span>(person1)  <span class="comment">// 返回一个非响应式的普通对象</span></span><br></pre></td></tr></table></figure>
<p>使用<code>toRaw</code>得到的就是一个普通的对象，对它修改不会作用到界面上。但是，<code>person1</code>和<code>person2</code>是互通的，<strong>其中任意一方修改数据都会影响到另一方</strong>，若响应式对象<code>person1</code>因此而改变也不会作用到页面上。</p>
<h5 id="markRaw"><a href="#markRaw" class="headerlink" title="markRaw"></a>markRaw</h5><p><code>markRaw</code>可以使一个普通对象无法变为响应式对象，例子：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person1 = <span class="title function_">markRaw</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;)</span><br><span class="line"><span class="keyword">let</span> person2 = <span class="title function_">reactive</span>(person1)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1, person2)</span><br></pre></td></tr></table></figure>
<p>上面代码不会报错，但是<code>person2</code>即使使用<code>reactive</code>包裹，也不会变为响应式的，仍然是普通对象。</p>
<h4 id="customRef"><a href="#customRef" class="headerlink" title="customRef"></a>customRef</h4><p><code>customRef</code>是自定义<code>ref</code>，应用场景是什么呢？假设我们输入框使用<code>v-model</code>双向绑定了一个<code>ref</code>定义的响应式数据，此时我们在输入框里输入内容，新内容会立刻放到变量中。思考一个需求，我要求输入框输入新内容后延迟 1 秒将内容刷新怎么实现？延迟 1 秒显得呆呆的，我们可以把延迟 1 秒改成网络请求等其它具有实际意义的事情。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &#123;&#123; name &#125;&#125; &lt;br&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">import</span> &#123; customRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> initValue = <span class="string">&#x27;张三&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> name = <span class="title function_">customRef</span>(<span class="function">(<span class="params">trace, trigger</span>)=&gt;</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">get</span>(<span class="params"></span>) &#123;  <span class="comment">// 访问 name 的时候会调用 get</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="title function_">trace</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">return</span> initValue</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">set</span>(<span class="params">value</span>) &#123;  <span class="comment">// 给 name 设置值的时候会调用 set</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    initValue = value</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="title function_">trigger</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;, <span class="number">1000</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>整体代码逻辑很好理解，但是有两个函数调用<code>trace()</code>与<code>trigger()</code>比较奇怪。</p>
<ul>
<li><code>trace()</code>是通知 Vue 对 name 进行监听，一旦发生变化就去更新</li>
<li><code>trigger()</code>是通知 Vue 数据发生了变化</li>
</ul>
<p>这两个函数是配套使用的，访问数据前调用<code>trace()</code>，修改数据后调用<code>trigger()</code>。<br>一般情况下，我们会将一些常用的自定义<code>ref</code>封装成<code>hook</code>方便调用。</p>
<h4 id="Teleport"><a href="#Teleport" class="headerlink" title="Teleport"></a>Teleport</h4><p><code>Teleport</code>是传送门标签，它能将写在里面的元素放到指定位置。看例子：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Child</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Child.vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>代码很简单，父组件内部维护一个子组件。按道理渲染的时候子组件是在<code>div.outer</code>内部的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 将要转移的内容写到 Teleport 标签内部，使用 to 属性指定要去的地方 --&gt;</span><br><span class="line">  &lt;Teleport to=&quot;#app&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;child&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/Teleport&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>这是子组件代码，这么写之后子组件会放到<code>#app</code>对应元素内部，就移出了父组件。<code>Teleport</code>的<code>to</code>属性里面写选择器，可以是标签选择器、类选择器、ID 选择器等。</p>
<h4 id="全局"><a href="#全局" class="headerlink" title="全局"></a>全局</h4><h5 id="全局组件"><a href="#全局组件" class="headerlink" title="全局组件"></a>全局组件</h5><p>所谓全局组件就是你可以在任意一个组件内无需导入却能直接访问它，Vue3 可以在<code>main.ts</code>的<code>app</code>对象上注册全局组件：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Child.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">component</span>(<span class="string">&#x27;Child&#x27;</span>, <span class="title class_">Child</span>)  <span class="comment">// 全局注册 Child 组件</span></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>注册完毕之后，其它地方可以直接使用<code>Child</code>组件而不需要导入它。</p>
<h5 id="全局指令"><a href="#全局指令" class="headerlink" title="全局指令"></a>全局指令</h5><p>Vue 给我们提供了很多指令，例如<code>v-bind</code>、<code>v-model</code>等。其实 Vue 还支持我们自定义指令，例如我想自定义一个<code>v-beauty</code>指令仍然需要修改<code>main.ts</code>：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"><span class="comment">// 注册 v-beauty 事件，传入一个回调，回调的参数分别是绑定的元素以及绑定的变量</span></span><br><span class="line">app.<span class="title function_">directive</span>(<span class="string">&#x27;beauty&#x27;</span>, <span class="function">(<span class="params">element, &#123;value&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value)</span><br><span class="line">    element.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;green&#x27;</span></span><br><span class="line">    element.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;yellow&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>使用的时候可以直接：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;child&quot; v-beauty=&quot;user&quot;&gt;你好！&#123;&#123; user.name &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  import &#123;reactive&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  let user = reactive(&#123;name: &#x27;张三&#x27;&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="常用功能"><a href="#常用功能" class="headerlink" title="常用功能"></a>常用功能</h3><h4 id="随机字符串"><a href="#随机字符串" class="headerlink" title="随机字符串"></a>随机字符串</h4><h5 id="nanoid"><a href="#nanoid" class="headerlink" title="nanoid"></a>nanoid</h5><ol>
<li>首先安装模块<code>npm i nanoid</code></li>
<li>使用<code>nanoid</code>生成随机字符串<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &#123;nanoid&#125; from &#x27;nanoid&#x27;  // 导入 nanoid</span><br><span class="line">let data1 = nanoid()  // 默认生成 21 位随机字符串</span><br><span class="line">let data2 = nanoid(36)  // 指定随机字符串位数</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="uuid"><a href="#uuid" class="headerlink" title="uuid"></a>uuid</h5><ol>
<li>首先安装模块<code>npm i uuid</code></li>
<li>使用<code>uuid</code>生成随机字符串<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &#123;v4 as uuidv4&#125; from &#x27;uuid&#x27;  // 导包、引入 v4 函数并改名</span><br><span class="line">let d1 = uuidv4()  // 直接调用获取 uuid</span><br><span class="line">console.log(d1, d1.length)  // uuid 默认 32 位十六进制数字再加上 4 个‘-’共 36 位</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="flex-布局"><a href="#flex-布局" class="headerlink" title="flex 布局"></a>flex 布局</h4><h5 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h5><p><code>Flex</code>是<code>Flexible Box</code>的缩写，意为“弹性布局”，用来为盒状模型提供最大的灵活性。任何一个容器都可以指定为Flex布局，即使是行内元素：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h5><p>采用<code>Flex</code>布局的元素，称为<code>Flex</code>容器（flex container），简称“容器”。容器的所有子元素自动成为容器成员，称为<code>Flex</code>项目（flex item），简称”项目”。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708850316323-d5c308bd-1858-4b56-83a2-23e3fcdcd4a5.png#averageHue=%23f3e5c2&clientId=u55691e50-1a3c-4&from=paste&height=333&id=u58c9e6ff&originHeight=333&originWidth=563&originalType=binary&ratio=1&rotation=0&showTitle=false&size=27719&status=done&style=none&taskId=udd504c6e-9053-44ab-8f4a-de24be191d1&title=&width=563" alt="image.png"><br>容器默认存在两根轴：水平的主轴（<code>main axis</code>）和垂直的交叉轴（<code>cross axis</code>）。主轴的开始位置（与边框的交叉点）叫做<code>main start</code>，结束位置叫做<code>main end</code>；交叉轴的开始位置叫做<code>cross start</code>，结束位置叫做<code>cross end</code>。<strong>项目默认沿主轴排列</strong>，单个项目占据的主轴空间叫做<code>main size</code>，占据的交叉轴空间叫做<code>cross size</code>。</p>
<h5 id="容器的属性"><a href="#容器的属性" class="headerlink" title="容器的属性"></a>容器的属性</h5><h6 id="flex-direction"><a href="#flex-direction" class="headerlink" title="flex-direction"></a>flex-direction</h6><p><code>flex-direction</code>属性可以决定主轴的方向即项目的排列方向。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row | row-reverse | column | column-reverse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>它有四种可能的取值：</p>
<ol>
<li><code>row</code>主轴是水平方向，起点在左侧，是<strong>默认值</strong>。</li>
<li><code>row-reverse</code>主轴是水平方向，起点在右侧。</li>
<li><code>column</code>主轴是垂直方向，起点在上沿。</li>
<li><code>column-reverse</code>主轴是垂直方向，起点在下沿。</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708869400776-56ea6a7b-adc7-4a90-bd76-1b7ee1bfd8c7.png#averageHue=%239ff4cd&clientId=u55691e50-1a3c-4&from=paste&height=326&id=u74de91c5&originHeight=326&originWidth=621&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10685&status=done&style=none&taskId=u8402e80e-950c-449b-8d4c-d4bd6f727b7&title=&width=621" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708870917976-1fcaf683-6045-4922-bd4f-f17328f8fff6.png#averageHue=%23aff1cb&clientId=u55691e50-1a3c-4&from=paste&height=401&id=u9b90b64f&originHeight=597&originWidth=128&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6271&status=done&style=none&taskId=ud6e3368c-08dd-4d7e-959e-ee2098f2f3f&title=&width=86" alt="image.png"><img src="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708870939130-971df0a8-5914-468f-8c2b-b7a8f59e4401.png#averageHue=%23aff0ca&clientId=u55691e50-1a3c-4&from=paste&height=400&id=u8dc57c3f&originHeight=597&originWidth=127&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7193&status=done&style=none&taskId=u07f27863-c9c9-4404-b436-9dd60638919&title=&width=85" alt="image.png"></p>
<h6 id="flex-wrap"><a href="#flex-wrap" class="headerlink" title="flex-wrap"></a>flex-wrap</h6><p>一般情况下项目会排列在轴线上，使用<code>flex-wrap</code>属性可以定义轴线上排不下时该如何换行：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: nowrap | wrap | wrap-reverse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>它有三种可能的取值：</p>
<ol>
<li><code>nowrap</code>是<strong>默认值</strong>，表示不换行。此时项目会被压缩，使其能够放到容器的一行中。</li>
<li><code>wrap</code>表示换行，第一行在上方。</li>
<li><code>wrap-reverse</code>表示换行，第一行在下方。</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708871559637-a8436eb3-4dc0-4102-9334-c1e322e2e74d.png#averageHue=%23b2f2cd&clientId=u55691e50-1a3c-4&from=paste&height=405&id=fwx3b&originHeight=693&originWidth=601&originalType=binary&ratio=1&rotation=0&showTitle=false&size=23408&status=done&style=none&taskId=u16321ae6-ae06-4d4c-b495-a02811b6508&title=&width=351" alt="image.png"></p>
<h6 id="flex-flow"><a href="#flex-flow" class="headerlink" title="flex-flow"></a>flex-flow</h6><p><code>flex-flow</code>属性是<code>flex-direction</code>与<code>flex-wrap</code>属性的合并简写形式，其<strong>默认值</strong>为<code>row nowrap</code>。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">flex-flow</span>: &lt;flex-direction&gt; &lt;flex-wrap&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="justify-content"><a href="#justify-content" class="headerlink" title="justify-content"></a>justify-content</h6><p><code>justify-content</code>定义了项目在主轴上的对齐方式。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">justify-content</span>: flex-start | flex-end | center | space-between | space-around;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>它有五种可能的取值（假设主轴从左到右）：</p>
<ol>
<li><code>flex-start</code>是<strong>默认值</strong>，表示左对齐。</li>
<li><code>flex-end</code>表示右对齐。</li>
<li><code>center</code>表示水平居中对齐。</li>
<li><code>space-between</code>两端对齐（首尾项目贴边），项目之间的间隔要相等。</li>
<li><code>space-around</code>每个项目两侧间隔相等，因此最边缘的间隔是中间间隔的一半。</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708871718814-33f00893-9c22-42d1-8e5b-2a0aee582dcd.png#averageHue=%23a6f3cd&clientId=u55691e50-1a3c-4&from=paste&height=311&id=u48f42724&originHeight=311&originWidth=602&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10586&status=done&style=none&taskId=ue56cb0b5-fd6b-4ec7-9367-2245ae382cf&title=&width=602" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708871729517-ed5d4482-45b5-4609-a2ad-dd4b04d4b79f.png#averageHue=%23a6f3cd&clientId=u55691e50-1a3c-4&from=paste&height=400&id=u0f664aa4&originHeight=469&originWidth=599&originalType=binary&ratio=1&rotation=0&showTitle=false&size=17325&status=done&style=none&taskId=u6cc2e22a-f82a-48c1-abf6-25f7eb0ab5c&title=&width=511" alt="image.png"></p>
<h6 id="align-items"><a href="#align-items" class="headerlink" title="align-items"></a>align-items</h6><p><code>align-items</code>属性定义项目在交叉轴上的对齐方式。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">align-items</span>: flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>它有五种可能的取值（假设交叉轴自上而下）：</p>
<ol>
<li><code>flex-start</code>表示上对齐。</li>
<li><code>flex-end</code>表示下对齐。</li>
<li><code>center</code>表示竖直居中对齐。</li>
<li><code>baseline</code>项目的第一行文字的基线对齐。</li>
<li><code>stretch</code>是<strong>默认值</strong>，如果项目<strong>未设置高度或设为auto</strong>，将占满整个容器的高度。</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708872558306-1c698298-f92e-4b9d-bc35-4454982e05b0.png#averageHue=%2359fecf&clientId=u55691e50-1a3c-4&from=paste&height=507&id=u8e2de372&originHeight=507&originWidth=598&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13406&status=done&style=none&taskId=u14ce1624-15f0-4c21-ad4b-944c14143c2&title=&width=598" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708872655439-9546c4fb-1f62-4712-9a2a-8b280ef58d04.png#averageHue=%23b3f1cb&clientId=u55691e50-1a3c-4&from=paste&height=246&id=Z1VG9&originHeight=246&originWidth=599&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6620&status=done&style=none&taskId=u4b52a577-98eb-404e-bda9-80a44373e7b&title=&width=599" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708872601508-05f20817-526d-4121-a7d7-07781c14af4c.png#averageHue=%2393f6ce&clientId=u55691e50-1a3c-4&from=paste&height=509&id=uae552e14&originHeight=509&originWidth=597&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14096&status=done&style=none&taskId=u2dd94120-3c2c-4f3d-85cc-0027a89fe93&title=&width=597" alt="image.png"></p>
<h5 id="项目的属性"><a href="#项目的属性" class="headerlink" title="项目的属性"></a>项目的属性</h5><h6 id="order"><a href="#order" class="headerlink" title="order"></a>order</h6><p><code>order</code>属性定义项目的排列顺序，数值越小排列越靠前，<strong>默认为 0</strong>。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">order</span>: &lt;integer&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708873614340-76f657ce-8fbf-49a0-b7fb-836988b7e6b0.png#averageHue=%23a0f1ca&clientId=u55691e50-1a3c-4&from=paste&height=151&id=xlmfk&originHeight=151&originWidth=601&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8506&status=done&style=none&taskId=u9b7d3a25-8a4b-47c0-8555-477284871e2&title=&width=601" alt="image.png"></p>
<h6 id="flex-grow"><a href="#flex-grow" class="headerlink" title="flex-grow"></a>flex-grow</h6><p><code>flex-grow</code>属性定义项目的放大比例。<strong>默认为 0</strong>，即使存在剩余空间，也不会放大。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: &lt;number&gt;; <span class="comment">/* default 0 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>放大原理是这样的：</p>
<ol>
<li>首先满足所有的项目需求的大小；</li>
<li>剩下的空间由所有项目共享，每个项目分到多少空间由<code>flex-grow</code>设定的值决定；</li>
<li>假设一个项目的<code>grow</code>值为<code>x</code>，所有项目的<code>grow</code>之和为<code>sum</code>，那么本项目占据剩余空间的比例为<code>x / sum</code>。</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708954455731-d53debfd-19b0-48e5-9127-60303ebfb899.png#averageHue=%23f6e6bb&clientId=ud2311a5d-5ed6-4&from=paste&height=208&id=u503bcec2&originHeight=229&originWidth=602&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=7937&status=done&style=none&taskId=u056a05e1-c060-4ae8-814c-c990e56ae74&title=&width=547.2727154109106" alt="image.png"></p>
<h6 id="flex-shrink"><a href="#flex-shrink" class="headerlink" title="flex-shrink"></a>flex-shrink</h6><p>和<code>flex-grow</code>相对，<code>flex-shrink</code>属性定义项目的缩小比例。<strong>默认为 1</strong>，即所有项目默认情况下都等比缩小。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: &lt;number&gt;; <span class="comment">/* default 1 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>原理也是类似的，每个项目根据<code>shrink</code>值计算出缩小的比例，然后根据比例进行缩小。<br>如果<code>shrink</code>值为 0，则表示无论如何也不缩小。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708962633039-279f332e-dc80-4724-9657-d43e558db0de.png#averageHue=%23fbf2e5&clientId=ud2311a5d-5ed6-4&from=paste&height=219&id=szzB9&originHeight=241&originWidth=343&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=6561&status=done&style=none&taskId=u9dff5668-6dcb-437e-b386-d40ab339710&title=&width=311.8181750597049" alt="image.png"></p>
<h6 id="flex-basis"><a href="#flex-basis" class="headerlink" title="flex-basis"></a>flex-basis</h6><p><code>flex-basis</code>属性定义项目在主轴上的原始大小，它会覆盖<code>width</code>的值。<strong>默认值</strong>是<code>auto</code>，即使用项目本来的大小。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-basis</span>: &lt;length&gt; | auto; <span class="comment">/* default auto */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/1561375/1709001465897-c93fa9a6-7a49-4514-b0ad-28e273a2106b.png#averageHue=%2300ffff&clientId=u55691e50-1a3c-4&from=paste&height=249&id=u87716ae0&originHeight=249&originWidth=598&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6167&status=done&style=none&taskId=u3225e199-22a4-48af-8bd0-05a7faf1335&title=&width=598" alt="image.png"></p>
<h6 id="flex"><a href="#flex" class="headerlink" title="flex"></a>flex</h6><p><code>flex</code>属性是<code>flex-grow、flex-shrink、flex-basis</code>的简写，默认值是<code>0 1 auto</code>。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: none | [ &lt;<span class="string">&#x27;flex-grow&#x27;</span>&gt; &lt;<span class="string">&#x27;flex-shrink&#x27;</span>&gt;? || &lt;<span class="string">&#x27;flex-basis&#x27;</span>&gt; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个属性有两个快捷值：<code>auto（0 1 auto）</code>和<code>none（0 0 auto）</code>。</p>
<h6 id="align-self"><a href="#align-self" class="headerlink" title="align-self"></a>align-self</h6><p><code>align-self</code>允许单个项目有与其它项目不一样的对齐方式，可以覆盖容器<code>align-items</code>属性。<strong>默认值</strong>是<code>auto</code>，表示继承容器<code>align-items</code>属性值。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">align-self</span>: auto | flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/1561375/1709003831899-a944a657-ee07-47b3-be37-f56e214db7e0.png#averageHue=%2360f5e8&clientId=u55691e50-1a3c-4&from=paste&height=250&id=ue4277758&originHeight=250&originWidth=598&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8644&status=done&style=none&taskId=u34356611-fc0b-4219-b76f-560fcf4606b&title=&width=598" alt="image.png"></p>
<h4 id="异步"><a href="#异步" class="headerlink" title="异步"></a>异步</h4><p>传统上使用异步基本上都是借助大量的回调，当回调层数足够多时会出现“回调地狱”。假设我们有这样的需求，1 秒后打印字符串“hello”，打印完之后等 2 秒再打印“world”，打印完后再等 3 秒打印“！！！”。传统上的实现代码可以是：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;world&quot;</span>)</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;!!!&quot;</span>)</span><br><span class="line">        &#125;, <span class="number">3000</span>)</span><br><span class="line">    &#125;, <span class="number">2000</span>)</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>
<p>以小见大，当回调层数足够多的时候代码的可读性极低，可维护性极差。为了解决“回调地狱”问题，<code>Promise</code>就诞生了，这是一种全新的异步写法。我们可以根据构造函数创建<code>Promise</code>对象：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    <span class="comment">// 要做的事情...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>构造函数接收一个函数作为参数，这个函数我们称为初始函数。我们会在初始函数内部写要做的操作，初始函数有两个参数<code>resolve</code>和<code>reject</code>。<code>resolve</code>是操作成功执行的回调，<code>reject</code>是操作失败执行的回调。同样的例子使用<code>Promise</code>写：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">        <span class="title function_">resolve</span>()</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;world&quot;</span>)</span><br><span class="line">            <span class="title function_">resolve</span>()</span><br><span class="line">        &#125;, <span class="number">2000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;!!!&quot;</span>)</span><br><span class="line">            <span class="title function_">resolve</span>()</span><br><span class="line">        &#125;, <span class="number">3000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>看似代码变长了很多，但是代码相对于“回调地狱”扁平化了许多，可读性大增。<br><code>Promise</code>对象有以下几个方法：</p>
<ol>
<li><code>then</code>用于处理<code>Promise</code>成功的回调，初始函数里面执行<code>resolve()</code>时就会执行这边的回调；</li>
<li><code>catch</code>用于处理<code>Promise</code>失败的回调，初始函数里面执行<code>reject()</code>时就会执行这边的回调；</li>
<li><code>finally</code>无论<code>Promise</code>是否成功，都会执行的回调；</li>
</ol>
<p>我们再看一个例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1111</span>);</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="number">2222</span>);</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3333</span>;</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">    <span class="keyword">throw</span> <span class="string">&quot;An error&quot;</span>;</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">&#125;).<span class="title function_">finally</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;finally&#x27;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><code>then</code>函数可以连续调用，由于<code>then</code>指定的回调有参数，所以调用<code>resolve</code>函数的时候也传递了参数。<br>多个<code>then</code>连续调用的时候，上一个<code>then</code>的返回值作为下一个<code>then</code>的参数。<br>通过<code>throw</code>抛出异常的时候会进入最近的<code>catch</code>。<br>下面看一个高端写法，使用<code>await</code>关键字简写：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">print</span>(<span class="params">msg, delay</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">            <span class="title function_">resolve</span>()</span><br><span class="line">        &#125;, delay)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">start</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">print</span>(<span class="string">&quot;hello&quot;</span>, <span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">print</span>(<span class="string">&quot;world&quot;</span>, <span class="number">2000</span>)</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">print</span>(<span class="string">&quot;!!!&quot;</span>, <span class="number">3000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>await</code>关键字后面需要跟一个<code>Promise</code>对象，它会在这个<code>Promise</code>执行结束之后再执行后面的语句，这样写异步代码就和写同步代码一样简单。<br><strong>注意：</strong>如果一个函数内部使用了<code>await</code>，那么这个函数需要使用<code>async</code>关键字修饰。<br>如果异步操作里面需要返回值应该怎么获取？很简单，直接定义变量接收即可。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">asyncFunc</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> value = <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(</span><br><span class="line">        <span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(<span class="string">&quot;Return value&quot;</span>);  <span class="comment">// 执行成功且有返回值需要处理</span></span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);  <span class="comment">// 直接在上面定义变量接收即可</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用了<code>await</code>之后似乎没有地方写失败的回调了，该怎么做？使用<code>try...catch</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">asyncFunc</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="string">&quot;Some error&quot;</span>; <span class="comment">// 或者 reject(&quot;Some error&quot;)</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;  <span class="comment">// 有异常会被 catch 到</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(err);  <span class="comment">// 会输出 Some error</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h4><p>解构赋值语法是一种 JS 表达式。通过解构赋值, 可以将属性值从对象或数组中取出，赋值给其他变量。</p>
<h5 id="对象的解构"><a href="#对象的解构" class="headerlink" title="对象的解构"></a>对象的解构</h5><p>对象的解构赋值有两种写法，如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 标准写法，冒号前面是源对象的属性名，冒号后面是要赋值的变量</span></span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">x</span>: a, <span class="attr">y</span>: b, <span class="attr">z</span>: c&#125; = obj</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b, c)  <span class="comment">// 1 2 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 简写，如果源对象属性与变量同名可以简写成下面的方式</span></span><br><span class="line"><span class="keyword">let</span> &#123;x, y, z&#125; = obj</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x, y, z)  <span class="comment">// 1 2 3</span></span><br></pre></td></tr></table></figure>
<p>上面的例子都是边创建变量边解构，如果想要解构给已经存在的变量可以：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x, y, <span class="title function_">z</span></span><br><span class="line">(&#123;x, y, z&#125; = obj)  <span class="comment">// 赋值表达式需要使用小括号括起来，不然会把等号左侧当做代码块会出错</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x, y, z)  <span class="comment">// 1 2 3</span></span><br></pre></td></tr></table></figure>
<p>解构时可以为变量赋予默认值：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;x, q=<span class="number">9</span>&#125; = obj  <span class="comment">// 这边给变量 q 一个默认值 9</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x, q)  <span class="comment">// 1 9</span></span><br></pre></td></tr></table></figure>
<p>当右侧对象里面没有同名属性或属性值为<code>undefined</code>时，变量会使用自己的默认值。</p>
<h5 id="数组的解构"><a href="#数组的解构" class="headerlink" title="数组的解构"></a>数组的解构</h5><p>数组的解构并不仅仅是将数组解构，解构的对象包含所有的可迭代对象，包含字符串、数组、集合、Map 等。</p>
<h6 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h6><p>字符串的赋值单位是字符。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> message = <span class="string">&#x27;Hello&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> [a, b] = message;  <span class="comment">// 按顺序获取前两个元素给变量 a、b</span></span><br><span class="line"><span class="keyword">let</span> [x, y, ...z] = message;  <span class="comment">// ...z 表示将剩下的所有元素全部赋给 z</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b);        <span class="comment">// H e</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x, y, z);     <span class="comment">// H e [&#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;]</span></span><br></pre></td></tr></table></figure>
<h6 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h6><p>数组的赋值单位是元素。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> [x, y, ...z] = numbers;  <span class="comment">// 尽管 z 只能分到一个元素，但因为 ... 的存在它仍然是数组</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x, y, z);    <span class="comment">// 1 2 [3]</span></span><br></pre></td></tr></table></figure>
<h6 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h6><p>集合的赋值单位也是元素。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>().<span class="title function_">add</span>(<span class="string">&#x27;foo&#x27;</span>).<span class="title function_">add</span>(<span class="string">&#x27;bar&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> [a, b] = set;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b);      <span class="comment">// foo bar</span></span><br></pre></td></tr></table></figure>
<h6 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h6><p>Map 的赋值单位是键值对组合而成的数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>().<span class="title function_">set</span>(<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>).<span class="title function_">set</span>(<span class="string">&#x27;b&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">let</span> [x, y] = map;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x, y);    <span class="comment">// [&quot;a&quot;, 1] [&quot;b&quot;, 2]</span></span><br></pre></td></tr></table></figure>
<h6 id="一些小知识点"><a href="#一些小知识点" class="headerlink" title="一些小知识点"></a>一些小知识点</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> [, y, z] = data  <span class="comment">// 需要跳过某些元素时可以直接写逗号</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(y, z)  <span class="comment">// 2 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a, b, c, d=-<span class="number">1</span>] = data  <span class="comment">// 数组解构也可以有默认值</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b, c, d)  <span class="comment">// 1 2 3 -1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> m, n</span><br><span class="line">[m, n] = data  <span class="comment">// 和对象解构不同，数组解构对已存在的变量解构不需要加“()”</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m, n)  <span class="comment">// 1 2</span></span><br></pre></td></tr></table></figure>
<h5 id="嵌套解构"><a href="#嵌套解构" class="headerlink" title="嵌套解构"></a>嵌套解构</h5><p>嵌套解构也是支持的，我们首先看对象的嵌套解构：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> student = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;ZhangSan&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">scores</span>: &#123;</span><br><span class="line">        <span class="attr">math</span>: <span class="number">19</span>,</span><br><span class="line">        <span class="attr">english</span>: <span class="number">85</span>,</span><br><span class="line">        <span class="attr">chinese</span>: <span class="number">100</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; name, <span class="attr">scores</span>: &#123;math, english, chinese&#125; &#125; = student; </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name, math, english, chinese)  <span class="comment">// Zhangsan 19 85 100</span></span><br></pre></td></tr></table></figure>
<p>比较好理解，我们并没有定义<code>scores</code>变量，而是使用标准写法将源对象的<code>scores</code>属性赋值给<code>&#123;math, english, chinese&#125;</code>，这又触发了对象的解构简写。<br>对数组的解构赋值更简单，看例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> numbers = [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>];</span><br><span class="line"><span class="keyword">let</span> [a, [b, c, d], e] = numbers;  <span class="comment">// 直接嵌套定义数组即可</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b, c, d, e); <span class="comment">// 1 2 3 4 5</span></span><br></pre></td></tr></table></figure>
<h5 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h5><h6 id="函数参数"><a href="#函数参数" class="headerlink" title="函数参数"></a>函数参数</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params">[a, b, c]</span>) &#123;  <span class="comment">// 直接在形参里解构</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a, b, c)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> data = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="title function_">func</span>(data)</span><br></pre></td></tr></table></figure>
<h6 id="函数返回值"><a href="#函数返回值" class="headerlink" title="函数返回值"></a>函数返回值</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;name, age&#125; = <span class="title function_">func</span>()  <span class="comment">// 直接对返回值解构</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name, age)</span><br></pre></td></tr></table></figure>
<h6 id="交换变量"><a href="#交换变量" class="headerlink" title="交换变量"></a>交换变量</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>, b = <span class="number">2</span>;</span><br><span class="line">[a, b] = [b, a]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b)</span><br></pre></td></tr></table></figure>
<h6 id="数组拷贝"><a href="#数组拷贝" class="headerlink" title="数组拷贝"></a>数组拷贝</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> [...x] = arr  <span class="comment">// 与下面的语句等价</span></span><br><span class="line"><span class="comment">// let x = [...arr]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x)</span><br></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Vue/" rel="tag"># Vue</a>
          
            <a href="/tags/Vue3/" rel="tag"># Vue3</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2024/01/01/Vue3%20%E7%B3%BB%E5%88%97%EF%BC%8801%EF%BC%89/" rel="next" title="Vue3 系列（01）">
                <i class="fa fa-chevron-left"></i> Vue3 系列（01）
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/index.html">
              
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#pinia-%E9%9B%86%E6%88%90%E7%AE%A1%E7%90%86"><span class="nav-number">1.</span> <span class="nav-text">pinia 集成管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%B9%B6%E9%9B%86%E6%88%90"><span class="nav-number">1.1.</span> <span class="nav-text">安装并集成</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E5%B9%B6%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="nav-number">1.2.</span> <span class="nav-text">存储并读取数据</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE"><span class="nav-number">1.2.1.</span> <span class="nav-text">存储数据</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="nav-number">1.2.2.</span> <span class="nav-text">读取数据</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="nav-number">1.3.</span> <span class="nav-text">修改数据</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%80"><span class="nav-number">1.3.1.</span> <span class="nav-text">方式一</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F%E4%BA%8C"><span class="nav-number">1.3.2.</span> <span class="nav-text">方式二</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%89"><span class="nav-number">1.3.3.</span> <span class="nav-text">方式三</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#storeToRefs"><span class="nav-number">1.4.</span> <span class="nav-text">storeToRefs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#getters"><span class="nav-number">1.5.</span> <span class="nav-text">getters</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%A2%E9%98%85"><span class="nav-number">1.6.</span> <span class="nav-text">订阅</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%84%E5%90%88%E5%BC%8F%E5%86%99%E6%B3%95"><span class="nav-number">1.7.</span> <span class="nav-text">组合式写法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="nav-number">2.</span> <span class="nav-text">组件通信</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#props-%E6%96%B9%E5%BC%8F"><span class="nav-number">2.1.</span> <span class="nav-text">props 方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6"><span class="nav-number">2.2.</span> <span class="nav-text">自定义事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mitt"><span class="nav-number">2.3.</span> <span class="nav-text">mitt</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#v-model"><span class="nav-number">2.4.</span> <span class="nav-text">v-model</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#attrs"><span class="nav-number">2.5.</span> <span class="nav-text">$attrs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#refs-%E5%92%8C-parent"><span class="nav-number">2.6.</span> <span class="nav-text">$refs 和 $parent</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#refs"><span class="nav-number">2.6.1.</span> <span class="nav-text">$refs</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#parent"><span class="nav-number">2.6.2.</span> <span class="nav-text">$parent</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#provide-%E5%92%8C-inject"><span class="nav-number">2.7.</span> <span class="nav-text">provide 和 inject</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%92%E6%A7%BD"><span class="nav-number">2.8.</span> <span class="nav-text">插槽</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%BB%98%E8%AE%A4%E6%8F%92%E6%A7%BD"><span class="nav-number">2.8.1.</span> <span class="nav-text">默认插槽</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="nav-number">2.8.2.</span> <span class="nav-text">具名插槽</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD"><span class="nav-number">2.8.3.</span> <span class="nav-text">作用域插槽</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E4%BF%A1%E6%80%BB%E7%BB%93"><span class="nav-number">2.9.</span> <span class="nav-text">通信总结</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E5%AE%83-API"><span class="nav-number">3.</span> <span class="nav-text">其它 API</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#shallow"><span class="nav-number">3.1.</span> <span class="nav-text">shallow</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#shallowRef"><span class="nav-number">3.1.1.</span> <span class="nav-text">shallowRef</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#shallowReactive"><span class="nav-number">3.1.2.</span> <span class="nav-text">shallowReactive</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#only"><span class="nav-number">3.2.</span> <span class="nav-text">only</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#readonly"><span class="nav-number">3.2.1.</span> <span class="nav-text">readonly</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#shallowReadonly"><span class="nav-number">3.2.2.</span> <span class="nav-text">shallowReadonly</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#raw"><span class="nav-number">3.3.</span> <span class="nav-text">raw</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#toRaw"><span class="nav-number">3.3.1.</span> <span class="nav-text">toRaw</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#markRaw"><span class="nav-number">3.3.2.</span> <span class="nav-text">markRaw</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#customRef"><span class="nav-number">3.4.</span> <span class="nav-text">customRef</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Teleport"><span class="nav-number">3.5.</span> <span class="nav-text">Teleport</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%A8%E5%B1%80"><span class="nav-number">3.6.</span> <span class="nav-text">全局</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6"><span class="nav-number">3.6.1.</span> <span class="nav-text">全局组件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E6%8C%87%E4%BB%A4"><span class="nav-number">3.6.2.</span> <span class="nav-text">全局指令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD"><span class="nav-number">4.</span> <span class="nav-text">常用功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9A%8F%E6%9C%BA%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">4.1.</span> <span class="nav-text">随机字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#nanoid"><span class="nav-number">4.1.1.</span> <span class="nav-text">nanoid</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#uuid"><span class="nav-number">4.1.2.</span> <span class="nav-text">uuid</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#flex-%E5%B8%83%E5%B1%80"><span class="nav-number">4.2.</span> <span class="nav-text">flex 布局</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-number">4.2.1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-number">4.2.2.</span> <span class="nav-text">基本概念</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%B9%E5%99%A8%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="nav-number">4.2.3.</span> <span class="nav-text">容器的属性</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#flex-direction"><span class="nav-number">4.2.3.1.</span> <span class="nav-text">flex-direction</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#flex-wrap"><span class="nav-number">4.2.3.2.</span> <span class="nav-text">flex-wrap</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#flex-flow"><span class="nav-number">4.2.3.3.</span> <span class="nav-text">flex-flow</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#justify-content"><span class="nav-number">4.2.3.4.</span> <span class="nav-text">justify-content</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#align-items"><span class="nav-number">4.2.3.5.</span> <span class="nav-text">align-items</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="nav-number">4.2.4.</span> <span class="nav-text">项目的属性</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#order"><span class="nav-number">4.2.4.1.</span> <span class="nav-text">order</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#flex-grow"><span class="nav-number">4.2.4.2.</span> <span class="nav-text">flex-grow</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#flex-shrink"><span class="nav-number">4.2.4.3.</span> <span class="nav-text">flex-shrink</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#flex-basis"><span class="nav-number">4.2.4.4.</span> <span class="nav-text">flex-basis</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#flex"><span class="nav-number">4.2.4.5.</span> <span class="nav-text">flex</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#align-self"><span class="nav-number">4.2.4.6.</span> <span class="nav-text">align-self</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%82%E6%AD%A5"><span class="nav-number">4.3.</span> <span class="nav-text">异步</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC"><span class="nav-number">4.4.</span> <span class="nav-text">解构赋值</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%A7%A3%E6%9E%84"><span class="nav-number">4.4.1.</span> <span class="nav-text">对象的解构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E7%9A%84%E8%A7%A3%E6%9E%84"><span class="nav-number">4.4.2.</span> <span class="nav-text">数组的解构</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">4.4.2.1.</span> <span class="nav-text">字符串</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%95%B0%E7%BB%84"><span class="nav-number">4.4.2.2.</span> <span class="nav-text">数组</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E9%9B%86%E5%90%88"><span class="nav-number">4.4.2.3.</span> <span class="nav-text">集合</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Map"><span class="nav-number">4.4.2.4.</span> <span class="nav-text">Map</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%B8%80%E4%BA%9B%E5%B0%8F%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="nav-number">4.4.2.5.</span> <span class="nav-text">一些小知识点</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%B5%8C%E5%A5%97%E8%A7%A3%E6%9E%84"><span class="nav-number">4.4.3.</span> <span class="nav-text">嵌套解构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">4.4.4.</span> <span class="nav-text">应用场景</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="nav-number">4.4.4.1.</span> <span class="nav-text">函数参数</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-number">4.4.4.2.</span> <span class="nav-text">函数返回值</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%BA%A4%E6%8D%A2%E5%8F%98%E9%87%8F"><span class="nav-number">4.4.4.3.</span> <span class="nav-text">交换变量</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E6%8B%B7%E8%B4%9D"><span class="nav-number">4.4.4.4.</span> <span class="nav-text">数组拷贝</span></a></li></ol></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lu Yan</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
