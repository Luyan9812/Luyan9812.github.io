<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Vue,Vue3," />










<meta name="description" content="开始安装 Node.js 到官网下载Node.js安装包并完成安装 安装完成之后到控制台使用node -v检查是否成功。   Windows系统还需要配置npm的全局安装路径： 以管理员身份运行命令行 执行命令npm config set prefix &quot;E:\develop\Nodejs&quot;，里面的路径换成Node.js的安装路径 执行命令npm config get pref">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue3 系列（01）">
<meta property="og:url" content="http://example.com/2024/01/01/Vue3%20%E7%B3%BB%E5%88%97%EF%BC%8801%EF%BC%89/index.html">
<meta property="og:site_name" content="Luyan&#39;s Bolg">
<meta property="og:description" content="开始安装 Node.js 到官网下载Node.js安装包并完成安装 安装完成之后到控制台使用node -v检查是否成功。   Windows系统还需要配置npm的全局安装路径： 以管理员身份运行命令行 执行命令npm config set prefix &quot;E:\develop\Nodejs&quot;，里面的路径换成Node.js的安装路径 执行命令npm config get pref">
<meta property="og:locale">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708317751018-b61a5489-d60f-46fd-9150-999ae15dff93.png#averageHue=%23343430&clientId=u6410bb4a-5bd7-4&from=paste&height=176&id=u89aa3b9e&originHeight=176&originWidth=734&originalType=binary&ratio=1&rotation=0&showTitle=false&size=134385&status=done&style=none&taskId=u84c02861-caf8-42ea-adde-41bd29cd47c&title=&width=734">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708351496371-5819ad20-0795-43fc-944a-8a64134bdbf0.png#averageHue=%23e6ddca&clientId=u3ed3b8a8-f739-4&from=paste&height=878&id=ud9948c90&originHeight=878&originWidth=1131&originalType=binary&ratio=1&rotation=0&showTitle=false&size=338425&status=done&style=none&taskId=uaa749988-b050-4d77-b78b-31b2f10844f&title=&width=1131">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708516085272-12432f3b-0e20-46cb-8270-577715674adb.png#averageHue=%23fbf7f5&clientId=ua750f794-3c8d-4&from=paste&height=571&id=uf4a6fb27&originHeight=1142&originWidth=2068&originalType=binary&ratio=2&rotation=0&showTitle=false&size=119004&status=done&style=none&taskId=u95d6b775-c71d-43dc-9fa8-654068011e2&title=&width=1034">
<meta property="article:published_time" content="2024-01-01T09:33:49.000Z">
<meta property="article:modified_time" content="2024-08-02T04:03:07.124Z">
<meta property="article:author" content="Lu Yan">
<meta property="article:tag" content="Vue">
<meta property="article:tag" content="Vue3">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708317751018-b61a5489-d60f-46fd-9150-999ae15dff93.png#averageHue=%23343430&clientId=u6410bb4a-5bd7-4&from=paste&height=176&id=u89aa3b9e&originHeight=176&originWidth=734&originalType=binary&ratio=1&rotation=0&showTitle=false&size=134385&status=done&style=none&taskId=u84c02861-caf8-42ea-adde-41bd29cd47c&title=&width=734">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://example.com/2024/01/01/Vue3 系列（01）/"/>





  <title>Vue3 系列（01） | Luyan's Bolg</title>
  








<meta name="generator" content="Hexo 7.3.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Luyan's Bolg</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">不积跬步，无以至千里；不积小流，无以成江海。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/index.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/01/01/Vue3%20%E7%B3%BB%E5%88%97%EF%BC%8801%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Luyan's Bolg">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Vue3 系列（01）</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-01T17:33:49+08:00">
                2024-01-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h3><h4 id="安装-Node-js"><a href="#安装-Node-js" class="headerlink" title="安装 Node.js"></a>安装 Node.js</h4><ol>
<li>到<a target="_blank" rel="noopener" href="https://nodejs.org/en">官网</a>下载<code>Node.js</code>安装包并完成安装<ul>
<li>安装完成之后到控制台使用<code>node -v</code>检查是否成功。</li>
</ul>
</li>
<li><code>Windows</code>系统还需要配置<code>npm</code>的全局安装路径：<ul>
<li>以管理员身份运行命令行</li>
<li>执行命令<code>npm config set prefix &quot;E:\develop\Nodejs&quot;</code>，里面的路径换成<code>Node.js</code>的安装路径</li>
<li>执行命令<code>npm config get prefix</code>检查是否设置成功</li>
</ul>
</li>
<li>设置<code>npm</code>的淘宝镜像<code>npm config set registry [https://registry.npmmirror.com](https://registry.npmmirror.com)</code></li>
</ol>
<h4 id="基于-Vite-创建项目"><a href="#基于-Vite-创建项目" class="headerlink" title="基于 Vite 创建项目"></a>基于 Vite 创建项目</h4><p>在合适的位置打开终端，输入命令：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm create vue<span class="meta">@latest</span></span><br></pre></td></tr></table></figure>
<p>第一次运行可能会提示安装某些包，控制台输入<code>y</code>即可。<br>接下来会出现一些定制选项，根据需求选择对应的选项即可，下面是一些参考：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708317751018-b61a5489-d60f-46fd-9150-999ae15dff93.png#averageHue=%23343430&clientId=u6410bb4a-5bd7-4&from=paste&height=176&id=u89aa3b9e&originHeight=176&originWidth=734&originalType=binary&ratio=1&rotation=0&showTitle=false&size=134385&status=done&style=none&taskId=u84c02861-caf8-42ea-adde-41bd29cd47c&title=&width=734" alt="image.png"><br>完成之后我们的项目就创建好了，就可以使用 vscode 打开项目了。打开项目之后使用<code>sudo npm i</code>安装必要的依赖。</p>
<h4 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h4><ul>
<li><code>.vscode</code>推荐安装 vscode 的插件配置</li>
<li><code>node_modules</code>安装的依赖</li>
<li><code>public</code>静态资源</li>
<li><code>src</code>源代码，我们的工作成果所在地</li>
<li><code>.gitignore</code>git 的忽略文件</li>
<li><code>env.d.ts</code>支持 ts 导入<code>.txt</code>等常见文件的配置</li>
<li><code>index.html</code>入口文件</li>
<li>包管理文件<ul>
<li><code>package-lock.json</code></li>
<li><code>package.json</code></li>
</ul>
</li>
<li>ts 配置文件<ul>
<li><code>tsconfig.app.json</code></li>
<li><code>tsconfig.json</code></li>
<li><code>tsconfig.node.json</code></li>
</ul>
</li>
<li><code>vite.config.ts</code>项目的配置文件</li>
</ul>
<h4 id="基本文件的解读"><a href="#基本文件的解读" class="headerlink" title="基本文件的解读"></a>基本文件的解读</h4><h5 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/favicon.ico&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vite App<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/src/main.ts&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>界面代码很简洁，但是实际运行起来很精美。这里面比较重要的是：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/src/main.ts&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面的 div 就是界面内容的渲染地，下面的 script 导入了<code>/src/main.ts</code>文件。</p>
<h5 id="src-main-ts"><a href="#src-main-ts" class="headerlink" title="src&#x2F;main.ts"></a>src&#x2F;main.ts</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./assets/main.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><code>import &#39;./assets/main.css&#39;</code>就是导入一个样式表，不太重要。<br>接下来我们着重理解一下：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>我们把整个项目理解成种花，<code>createApp</code>表示花盆，<code>App</code>是组件表示花的根；那么<code>createApp(App)</code>就表示将“根”放到花盆里面，<code>.mount(&#39;#app&#39;)</code>表示将花盆放置到<code>index.html</code>的<code>#app</code>元素内。在<code>src/components</code>目录下放着很多自定义的组件，这些组件可以理解成花的枝枝叶叶。<br>所以实际上这么写完之后，运行起来会展示<code>index.html</code>，页面的<code>#app</code>里面会展示<code>App</code>这个组件，我们可以在这个组件里面导入更多其它组件使页面变得丰富。</p>
<h3 id="核心语法"><a href="#核心语法" class="headerlink" title="核心语法"></a>核心语法</h3><h4 id="新旧-Vue"><a href="#新旧-Vue" class="headerlink" title="新旧 Vue"></a>新旧 Vue</h4><h5 id="Vue2-Demo"><a href="#Vue2-Demo" class="headerlink" title="Vue2 Demo"></a>Vue2 Demo</h5><p>首先我们在<code>/src/components</code>目录下创建一个组件<code>Person.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;点击修改姓名&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;点击修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;点击显示电话&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;  // 数据要定义在 data 函数的返回值里</span><br><span class="line">                name: &quot;张三&quot;,</span><br><span class="line">                age: 18,</span><br><span class="line">                tel: 18888888888</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;  // 函数定义在 methods 属性里</span><br><span class="line">            changeName() &#123;</span><br><span class="line">                // 读取数据域定义的字段，需要加 this.</span><br><span class="line">                this.name = &quot;李四&quot;;</span><br><span class="line">            &#125;,</span><br><span class="line">            changeAge() &#123;</span><br><span class="line">                // 字段是响应式的，修改变量的值，界面上也会更改</span><br><span class="line">                this.age += 1;</span><br><span class="line">            &#125;,</span><br><span class="line">            showTel() &#123;</span><br><span class="line">                alert(this.tel)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>一个组件里面可以写三类标签，分别是：</p>
<ul>
<li><code>template</code>用于书写 HTML 框架</li>
<li><code>script</code>用于写交互的内容</li>
<li><code>style</code>用于指定样式</li>
</ul>
<p>接着我们在<code>App.vue</code>里面引用这个组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- 因为下面注册过这个组件，所以可以直接使用 --&gt;</span><br><span class="line">    &lt;Person /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">    // 导入 Person 组件，import 后面只是起的一个名字，可随意</span><br><span class="line">    import Person from &quot;./components/Person.vue&quot;</span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">        // 将 Person 组件注册到 components 属性里面，才可以使用这个标签</span><br><span class="line">        components: &#123;Person&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h5 id="Vue3-Demo"><a href="#Vue3-Demo" class="headerlink" title="Vue3 Demo"></a>Vue3 Demo</h5><p>我们将<code>Person.vue</code>代码修改如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;点击修改姓名&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;点击修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;点击显示电话&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        setup() &#123;</span><br><span class="line">            // 定义数据</span><br><span class="line">            let name = &quot;张三&quot;;</span><br><span class="line">            let age = 18;</span><br><span class="line">            let tel = 18888888888;</span><br><span class="line"></span><br><span class="line">            // 定义方法</span><br><span class="line">            function changeName() &#123;</span><br><span class="line">                name = &quot;李四&quot;;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            function changeAge() &#123;</span><br><span class="line">                age += 1;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            function showTel() &#123;</span><br><span class="line">                alert(tel)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            return &#123;name, age, changeName, changeAge, showTel&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>Vue3 里面并没有把数据与函数分隔，它们都统一定义在<code>setup</code>函数里面。<br><code>setup</code>的返回值是一个对象，用来指定需要暴露出去的变量或函数，此外<code>setup</code>弱化了<code>this</code>，因此定义的函数访问变量均<strong>不能</strong>使用<code>this.</code>。<br><code>App.vue</code>可以不改，但是如果使用 Vue3 的推荐写法应该：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;Person /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    // setup 里面导入的内容都会默认交出去</span><br><span class="line">    import Person from &quot;./components/Person.vue&quot;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong>像例子中一样直接定义的变量（<code>let age = 18</code>）均不是响应式的，即修改变量的值，在界面上并不会改变。</p>
<h5 id="Vue2-与-Vue3-混合"><a href="#Vue2-与-Vue3-混合" class="headerlink" title="Vue2 与 Vue3 混合"></a>Vue2 与 Vue3 混合</h5><p><code>setup</code>初始化的时候很早，甚至早于<code>beforeCreate</code>。因此<code>setup</code>要早于<code>data</code>和<code>methods</code>加载，于是出现了以下问题：</p>
<ol>
<li><code>setup</code>能否与<code>data/methods</code>共存？<ul>
<li>答：能。<code>setup</code>是 Vue3 的推荐写法，<code>data/methods</code>是 Vue2 的写法，在 Vue3 里面两者均支持，也能同时出现。模板渲染的时候两种方式也都能拿到数据。</li>
</ul>
</li>
<li><code>data/methods</code>里面是否可以引用<code>setup</code>里面定义的数据或函数？<ul>
<li>答：可以，因为在计算<code>data/methods</code>的时候<code>setup</code>已经加载完毕，里面的数据当然可以拿到。但是使用<code>data/methods</code>获取数据需要使用<code>this.</code>。</li>
</ul>
</li>
<li><code>setup</code>里面能否引用<code>data/methods</code>里的数据或函数？<ul>
<li>答：不能，因为计算<code>setup</code>的时候，<code>data/methods</code>还没有计算，当然取不到内容。</li>
</ul>
</li>
</ol>
<h4 id="setup-语法糖"><a href="#setup-语法糖" class="headerlink" title="setup 语法糖"></a>setup 语法糖</h4><p>我们在 Vue3 里面基本不推荐<code>data/methods</code>的写法，都是推荐将变量、函数定义在<code>setup</code>里面。但是<code>setup</code>函数里面需要将暴露出去的变量函数等通过返回值返回，这个比较麻烦。于是出现了<code>setup</code>语法糖，下面两种写法是等价的：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        setup() &#123;</span><br><span class="line">            // 定义数据</span><br><span class="line">            let age = 18;</span><br><span class="line">            // 定义方法</span><br><span class="line">            function changeAge() &#123;</span><br><span class="line">                age += 1;</span><br><span class="line">            &#125;</span><br><span class="line">            return &#123;age, changeAge&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    // 定义数据</span><br><span class="line">    let age = 18;</span><br><span class="line">    // 定义方法</span><br><span class="line">    function changeAge() &#123;</span><br><span class="line">        age += 1;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>就是在<code>script</code>标签里面加一个<code>setup</code>就可以了，标签里面的所有内容相当于写在原来的<code>setup</code>函数里面且都会暴露出去。<br>这样书写确实非常方便，但是语法糖里面不能再写<code>export</code>了。一般来说这不是什么问题，但在某些情况下我们会需要修改组件的名字，因为默认情况下什么都不做组件会与文件同名。于是有下面的写法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;Person_new&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    let name = &quot;张三&quot;;</span><br><span class="line">    // 其它内容</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>我们新开一个<code>script</code>标签，export 出去一个 name 用于指定组件的名字。<br>一般便于在 Chrome 的 Vue 插件里面查看。<br>这样写还是比较麻烦的，需要写两个<code>script</code>标签，而其中一个<code>script</code>标签仅仅用于修改组件名称。我们可以通过使用一个插件简化书写：</p>
<ol>
<li>使用<code>npm i vite-plugin-vue-setup-extend -D</code>命令安装插件</li>
<li>在<code>vite.comfig.ts</code>里面配置这个插件：<ol>
<li>导入插件<code>import VueSetupExtend from &#39;vite-plugin-vue-setup-extend&#39;</code></li>
<li>在<code>plugins</code>里面追加调用<code>VueSetupExtend()</code></li>
</ol>
</li>
<li>在<code>script</code>标签使用<code>name</code>属性指定组件名<code>&lt;script setup lang=&quot;ts&quot; name=&quot;PersonSuper&quot;&gt;</code></li>
</ol>
<h4 id="响应式数据"><a href="#响应式数据" class="headerlink" title="响应式数据"></a>响应式数据</h4><p>上面我们说过在<code>setup</code>里面定义的数据都不是响应式的，对它们做修改之后界面上展示的是不变的。接下来我们介绍响应式数据应该怎么定义和操作。</p>
<h5 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h5><p>Vue3 里面将基本数据类型转为响应式需要借助<code>ref</code>，看一个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; count &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;addCount&quot;&gt;点击修改数字&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123;ref&#125; from &#x27;vue&#x27;  // 导入 ref</span><br><span class="line"></span><br><span class="line">    let count = ref(0)  // 将基本数据类型使用 ref 包裹起来就变成响应式数据了</span><br><span class="line">    function addCount() &#123;</span><br><span class="line">        count.value += 1;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>实际上<code>ref</code>是一个函数，它返回一个<code>RefImpl</code>对象，我们传进去的值会存在对象的<code>value</code>属性里。因此在 js 代码中我们想要修改这个值，需要使用<code>xxx.value = yyy</code>的写法。但是在模板的插值表达式里面不需要额外的调用<code>.value</code>，因为表达式会自己调用。</p>
<h5 id="对象类型"><a href="#对象类型" class="headerlink" title="对象类型"></a>对象类型</h5><p>对象类型的数据要是想转为响应式，有两种方式分别是<code>ref</code>和<code>reactive</code>。这边说的对象，只要不是基本数据类型都是对象类型，例如数组、函数、原生对象等等。</p>
<h6 id="reactive"><a href="#reactive" class="headerlink" title="reactive"></a>reactive</h6><p>和<code>ref</code>类似，我们只需要将对象使用<code>reactive</code>函数包裹起来就可以了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; car.name &#125;&#125;, &#123;&#123; car.price &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;addPrice&quot;&gt;点击修改价格&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123;reactive&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">    let car = reactive(&#123;name: &quot;奔驰&quot;, price: 100&#125;)</span><br><span class="line">    function addPrice() &#123;</span><br><span class="line">        car.price += 10</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p><code>reactive</code>函数会返回一个<code>Proxy</code>对象，和<code>ref</code>不一样的是我们获取对象属性的时候不需要<code>.value</code>之类的，还像原来那样获取。包括获取数组元素的时候仍然使用类似于<code>cars[0]</code>这样的写法，不需要添加任何多余的部分。</p>
<h6 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h6><p><code>ref</code>除了可以创建响应式基本数据，还可以创建响应式对象。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h2 v-for=&quot;car in cars&quot; :key=&quot;car.name&quot;&gt;&#123;&#123; car.name &#125;&#125;, &#123;&#123; car.price &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;addPrice&quot;&gt;点击修改第一辆车价格&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">    let cars = ref([</span><br><span class="line">        &#123;name: &quot;奔驰&quot;, price: 100&#125;,</span><br><span class="line">        &#123;name: &quot;宝马&quot;, price: 50&#125;,</span><br><span class="line">        &#123;name: &quot;奥迪&quot;, price: 80&#125;</span><br><span class="line">    ])</span><br><span class="line">    function addPrice() &#123;</span><br><span class="line">        cars.value[0].price += 10</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>如果使用<code>ref</code>创建响应式对象，我们在 js 代码里面操作这个对象的时候仍然是需要先<code>.value</code>的。当然在插值表达式里面是不需要的，表达式仍然会帮我们自动计算。<br>事实上<code>ref</code>是借助于<code>reactive</code>实现响应式对象的，它会先使用<code>reactive</code>函数包裹对象生成<code>Proxy</code>对象，然后将这个对象赋值给<code>RefImpl</code>的<code>value</code>属性。<br>我们这个例子里面简要写了一个循环渲染，使用<code>v-for</code>来对一个数组进行循环遍历，注意循环的时候需要给标签加一个<code>key</code>属性作为当前标签的唯一标识。一般我们会使用<code>:key</code>，这个全称<code>v-bind:key</code>，这样写的话后面的值会当做 js 表达式解析，不然的话只会当做普通字符串。</p>
<h5 id="ref-踩坑"><a href="#ref-踩坑" class="headerlink" title="ref 踩坑"></a>ref 踩坑</h5><p>假设有一个变量<code>let count = ref(0)</code>，我们一般使用<code>count.value = 9</code>的写法来修改这个变量。那如果我写出下面的代码会怎么样？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">count = 9  // 这种写法 count 会变成普通变量，不是响应式的</span><br><span class="line"></span><br><span class="line">// 看上去没有问题，实际上界面数据仍然和原来的 ref 绑定，所以这样写也不是响应式的</span><br><span class="line">count = ref(9)  </span><br></pre></td></tr></table></figure>
<p>总结：不论使用<code>ref</code>包裹基本数据类型还是对象，修改变量的时候我们都应该修改<code>.value</code>而不是变量本身。只要修改的是<code>.value</code>，那么不论包裹的类型都是响应式的。<br>比较麻烦的是每次我们都需要自己写<code>.value</code>，我们可以在插件里面配置，让编译器自动追加<code>.value</code>，看下图配置：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708351496371-5819ad20-0795-43fc-944a-8a64134bdbf0.png#averageHue=%23e6ddca&clientId=u3ed3b8a8-f739-4&from=paste&height=878&id=ud9948c90&originHeight=878&originWidth=1131&originalType=binary&ratio=1&rotation=0&showTitle=false&size=338425&status=done&style=none&taskId=uaa749988-b050-4d77-b78b-31b2f10844f&title=&width=1131" alt="image.png"></p>
<h5 id="reactive-踩坑"><a href="#reactive-踩坑" class="headerlink" title="reactive 踩坑"></a>reactive 踩坑</h5><p>和<code>ref</code>相似，修改<code>reactive</code>包裹的对象时应该修改对象内部的东西，而不是这个对象的引用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">let</span> <span class="variable">cars</span> <span class="operator">=</span> reactive([...])</span><br><span class="line">cars[<span class="number">1</span>] = &#123;...&#125;  <span class="comment">// 合理，修改数组的元素</span></span><br><span class="line"></span><br><span class="line"><span class="type">let</span> <span class="variable">car</span> <span class="operator">=</span> reactive(&#123;...&#125;)</span><br><span class="line">car.name = <span class="string">&#x27;...&#x27;</span>  <span class="comment">// 合理，修改对象的属性</span></span><br><span class="line"></span><br><span class="line"><span class="type">let</span> <span class="variable">car</span> <span class="operator">=</span> reactive(&#123;...&#125;)</span><br><span class="line">car = &#123;...&#125;  <span class="comment">// 错误，car 变量引用被修改了</span></span><br><span class="line">car = reactive(&#123;...&#125;)  <span class="comment">// 错误，car 变量引用被修改了</span></span><br></pre></td></tr></table></figure>
<p>很多时候，我们确实需要修改整个对象。比如某个变量有一个初值，后面服务请求获取到数据再覆盖掉这个值，此时不可能挨个属性赋值，太麻烦，我们可以：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let car = reactive(&#123;...&#125;)</span><br><span class="line">car = Object.assign(car, &#123;...&#125;)</span><br></pre></td></tr></table></figure>
<p><code>Object.assign</code>函数可以有任意多参数，它可以把后面所有对象的属性都添加到第一个对象里，如果有同名属性会覆盖，后面对象的同名属性覆盖前面对象的。</p>
<h5 id="使用建议"><a href="#使用建议" class="headerlink" title="使用建议"></a>使用建议</h5><p>基本数据类型响应式：只能使用<code>ref</code>；<br>对象类型响应式：</p>
<ul>
<li>对象层级较浅，<code>ref</code>和<code>reactive</code>均可</li>
<li>对象层级较深，推荐使用<code>reactive</code></li>
</ul>
<h4 id="toRefs-toRef"><a href="#toRefs-toRef" class="headerlink" title="toRefs&#x2F;toRef"></a>toRefs&#x2F;toRef</h4><h5 id="toRefs"><a href="#toRefs" class="headerlink" title="toRefs"></a>toRefs</h5><p><code>toRefs</code>主要用于解构赋值时，让解构出来的变量也具备响应式。首先如果我们直接解构：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">let</span> <span class="variable">person</span> <span class="operator">=</span> reactive(&#123;name: <span class="string">&quot;张三&quot;</span>, age: <span class="number">19</span>, score: <span class="number">100</span>&#125;)</span><br><span class="line">let &#123;name, age, score&#125; = person</span><br><span class="line"><span class="comment">/** 第二行代码就相当于：</span></span><br><span class="line"><span class="comment">    name = person.name</span></span><br><span class="line"><span class="comment">    ...</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>很显然解构出来的变量只是普通变量，并不是响应式的。想要让解构变量是响应式的可以：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &#123;reactive, toRefs&#125; from &#x27;vue&#x27;</span><br><span class="line">let person = reactive(&#123;name: &quot;张三&quot;, age: 19, score: 100&#125;)</span><br><span class="line">let &#123;name, age, score&#125; = toRefs(person)</span><br></pre></td></tr></table></figure>
<p>使用<code>toRefs</code>将对象包裹起来，这样解构出来的变量直接就是<code>RefImpl</code>，并且解构的变量与原来对象的属性是同一的。也就是说，<code>name</code>和<code>person.name</code>的变化是互通，要变一起变。</p>
<h5 id="toRef"><a href="#toRef" class="headerlink" title="toRef"></a>toRef</h5><p><code>toRef</code>功能和<code>toRefs</code>类似，不过<code>toRefs</code>能将对象所有属性全部解构出来，而<code>toRef</code>只能解构一个属性。当然解构出来的变量也原来的对象属性也是同一，因此也是响应式的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;change&quot;&gt;修改人员信息&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123;reactive, toRef&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">    let person = reactive(&#123;name: &quot;张三&quot;&#125;)</span><br><span class="line">    let name = toRef(person, &quot;name&quot;)  // 指定要解构的属性</span><br><span class="line">    function change() &#123;</span><br><span class="line">        name.value = &quot;李四&quot;  // 模板里面会变，因为 name 与 person.name 同一变化</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h4 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h4><p>很多时候我们定义的变量不是直接赋值的，而是依据某些其它变量的值计算得来的。看例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    姓：&lt;input v-model=&quot;firstName&quot; /&gt; &lt;br&gt;</span><br><span class="line">    名：&lt;input v-model=&quot;lastName&quot; /&gt; &lt;br&gt;</span><br><span class="line">    全名：&#123;&#123; fullName &#125;&#125;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123;ref, computed&#125; from &#x27;vue&#x27;</span><br><span class="line">    let firstName = ref(&quot;&quot;)</span><br><span class="line">    let lastName = ref(&quot;&quot;)</span><br><span class="line">    let fullName = computed(()=&gt;&#123;  // 传进去一个计算函数</span><br><span class="line">        return firstName.value + &quot;-&quot; + lastName.value</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>代码不难看出，变量<code>firstName</code>与<code>lastName</code>分别与两个输入框双向绑定。变量<code>fullName</code>是一个计算属性，它的值有姓与名组合而成，它的使用很简单就是把计算的函数传到<code>computed</code>里面。这样写，姓与名每次发生变化，都会触发重新计算<code>fullName</code>。<br><code>fullName</code>的类型实际是<code>ComputedRefImpl</code>，而<code>ComputedRefImpl</code>的<code>value</code>属性是只读的，因此无法给<code>fullName.value</code>赋值。<br>如果我想实现给<code>fullName</code>传一个值，然后根据值自动修改<code>firstName</code>与<code>lastName</code>可以：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    姓：&lt;input v-model=&quot;firstName&quot; /&gt; &lt;br&gt;</span><br><span class="line">    名：&lt;input v-model=&quot;lastName&quot; /&gt; &lt;br&gt;</span><br><span class="line">    全名：&#123;&#123; fullName &#125;&#125; &lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;直接给全名赋值&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123;ref, computed&#125; from &#x27;vue&#x27;</span><br><span class="line">    let firstName = ref(&quot;&quot;)</span><br><span class="line">    let lastName = ref(&quot;&quot;)</span><br><span class="line">    let fullName = computed(&#123;</span><br><span class="line">        get() &#123;  // 读取值</span><br><span class="line">            return firstName.value + &quot;-&quot; + lastName.value</span><br><span class="line">        &#125;,</span><br><span class="line">        set(val) &#123;  // 设置值</span><br><span class="line">            // 实际上也是改变与它相关的其它变量而不是直接变它自己</span><br><span class="line">            ([firstName.value, lastName.value] = val.split(&quot;-&quot;))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    function changeName() &#123;</span><br><span class="line">        fullName.value = &quot;li-si&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h4 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h4><p><code>watch</code>可以监视数据的变化，Vue3 中的<code>watch</code>只能监视下面 4 种数据：</p>
<ol>
<li><code>ref</code>定义的数据；</li>
<li><code>reactive</code>定义的数据；</li>
<li>函数返回一个值；</li>
<li>包含上述内容的数组；</li>
</ol>
<p>分情况的话具体可以分为 5 种情况。</p>
<h5 id="ref-定义的基本类型数据"><a href="#ref-定义的基本类型数据" class="headerlink" title="ref 定义的基本类型数据"></a>ref 定义的基本类型数据</h5><p>使用<code>watch</code>监视<code>ref</code>定义的基本类型数据，看例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;add&quot;&gt;点我 sum+1&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  // 导入 watch</span><br><span class="line">  import &#123;ref, watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  let sum = ref(0)</span><br><span class="line">  function add() &#123;</span><br><span class="line">    sum.value++</span><br><span class="line">  &#125;</span><br><span class="line">  // 第一个参数是监视源，注意没有加 .value</span><br><span class="line">  // 第二个参数是一个回调函数，函数两个参数分别表示新值与旧值</span><br><span class="line">  watch(sum, (newVal, oldVal)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;sum 变化了：&#x27;, newVal, oldVal)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>使用还是比较简单的，那么如果满足一定条件我就想取消监视怎么办？例如当<code>sum ≥ 10</code>时停止监视，js 代码可以改为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let stopWatch = watch(sum, (newVal, oldVal)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;sum 变化了：&#x27;, newVal, oldVal)</span><br><span class="line">    if (newVal &gt;= 10) stopWatch()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>主要用到<code>watch</code>函数的返回值，它会返回一个函数，调用这个函数就可以取消监视。</p>
<h5 id="ref-定义的对象类型数据"><a href="#ref-定义的对象类型数据" class="headerlink" title="ref 定义的对象类型数据"></a>ref 定义的对象类型数据</h5><p>大体写法和上面的类似，直接看一个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeInfo&quot;&gt;修改信息&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeRef&quot;&gt;修改引用&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123;ref, watch&#125; from &#x27;vue&#x27;</span><br><span class="line">    let person = ref(&#123;name: &quot;张三&quot;, age: 18&#125;)</span><br><span class="line"></span><br><span class="line">    function changeInfo() &#123;</span><br><span class="line">        person.value.age = 20</span><br><span class="line">        person.value.name = &quot;李四&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    function changeRef() &#123;</span><br><span class="line">        person.value = &#123;name: &quot;王五&quot;, age: 10&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    watch(person, (newVal, oldVal)=&gt;&#123;</span><br><span class="line">        console.log(&quot;person 改变了&quot;, newVal, oldVal)</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>在这个案例里面点击“修改信息”是不会触发监听的，而“修改引用”是会触发的。因此可以看出我们这样的默认写法，<strong>只会监听</strong><code>**ref**</code><strong>对象</strong><code>**value**</code><strong>的修改，而不会监听原对象里面各个属性的修改</strong>。<br>在大部分情况下，我们需要监听对象内部属性的变化，此时就需要给<code>watch</code>函数传进去第三个参数。这第三个参数是一个对象，用来配置<code>watch</code>函数的行为，主要可以配置：</p>
<ul>
<li><p><code>deep</code>表示是否深度监听，设为<code>true</code>就可以监听对象的属性变化</p>
</li>
<li><p><code>immediate</code>表示是否立刻触发监听，设为<code>true</code>就可以立刻监听这个对象，初次<code>oldVal</code>为<code>undefined</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">watch(person, (newVal, oldVal)=&gt;&#123;</span><br><span class="line">    console.log(&quot;person 改变了&quot;, newVal, oldVal)</span><br><span class="line">&#125;, &#123;deep: true, immediate: true&#125;)</span><br></pre></td></tr></table></figure>
<p>我们在监听的时候会拿到两个值<code>newVal</code>和<code>oldVal</code>，分别表示改动后的新值和改动前的旧值。但是这两个值都是返回<code>ref</code>的<code>value</code>值：</p>
</li>
<li><p>当我们修改这个<code>value</code>值的时候，<code>newVal</code>和<code>oldVal</code>分别表示修改前后的两个对象。</p>
</li>
<li><p>当我们修改的是对象里面属性的时候（<code>person.value.name=&quot;zs&quot;</code>），<code>newVal</code>和<code>oldVal</code>指向的就是同一个对象，因此两者的内容是完全一样的。</p>
</li>
</ul>
<p>大多数时候我们并不会关注旧值是什么，因此一般只写一个参数表示新值：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">watch(person, (newVal)=&gt;&#123;</span><br><span class="line">    // ...</span><br><span class="line">&#125;, &#123;deep: true, immediate: true&#125;)</span><br></pre></td></tr></table></figure>
<h5 id="reactive-定义的对象数据"><a href="#reactive-定义的对象数据" class="headerlink" title="reactive 定义的对象数据"></a>reactive 定义的对象数据</h5><p>监听<code>reactive</code>定义的对象数据的时候，只能监听对象属性的改变。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeInfo&quot;&gt;修改信息&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeRef&quot;&gt;修改引用&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123;reactive, watch&#125; from &#x27;vue&#x27;</span><br><span class="line">    let person = reactive(&#123;name: &quot;张三&quot;, age: 18&#125;)</span><br><span class="line"></span><br><span class="line">    function changeInfo() &#123;  // 直接修改属性</span><br><span class="line">        person.age = 20</span><br><span class="line">        person.name = &quot;李四&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    function changeRef() &#123;</span><br><span class="line">        // 通过 Object.assign 批量添加/修改属性</span><br><span class="line">        person = Object.assign(person, &#123;name: &quot;王五&quot;, age: 10&#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    watch(person, (newVal, oldVal)=&gt;&#123;</span><br><span class="line">        console.log(&quot;person 改变了&quot;, newVal, oldVal)</span><br><span class="line">    &#125;, &#123;immediate: true&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>例子中两种修改方式都没有改变变量<code>person</code>的引用，都是在修改<code>person</code>指向对象的内容。监听<code>reactive</code>定义的对象默认是开启深度监视的（监听属性变化），且深度监视是关不掉的。即使你在配置里面传入<code>deep: false</code>也是无效的。因为不涉及修改对象的引用，所以<code>newVal</code>和<code>oldVal</code>也是同一个对象。不论使用<code>ref</code>还是<code>reactive</code>，我们都不能直接给变量赋值：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">let</span> <span class="variable">person</span> <span class="operator">=</span> ref(&#123;...&#125;)</span><br><span class="line"><span class="type">let</span> <span class="variable">person</span> <span class="operator">=</span> reactive(&#123;...&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这种写法错误，第一这样 person 不是响应式，第二监听不了</span></span><br><span class="line">person = &#123;...&#125;</span><br></pre></td></tr></table></figure>
<h5 id="监视属性"><a href="#监视属性" class="headerlink" title="监视属性"></a>监视属性</h5><p>上面都是监视整个对象，如果我们想要监视的是响应式对象里面（<code>ref</code>和<code>reactive</code>）的某个属性怎么做？这个需要区分该属性是基本类型还是对象类型：</p>
<h6 id="基本类型"><a href="#基本类型" class="headerlink" title="基本类型"></a>基本类型</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;changeName&quot;&gt;修改姓名&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  import &#123;reactive, watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  let person = reactive(&#123;name: &quot;张三&quot;, cars: &#123;c1: &quot;奔驰&quot;, c2: &quot;宝马&quot;&#125;&#125;)</span><br><span class="line"></span><br><span class="line">  function changeName() &#123;</span><br><span class="line">    person.name = &quot;李四&quot;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  watch(()=&gt;person.name, (newVal)=&gt;&#123;</span><br><span class="line">    console.log(&quot;姓名发生了变化：&quot;, newVal)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>主要看监视器部分，我们第一个参数也就是监视源并没有直接写<code>person.name</code>，因为<code>person.name</code>是基本数据类型，不能被监视。能监视的类型里面有一种是返回一个值的函数，因此我们将这个属性包装成一个值（简写成箭头函数）。</p>
<h6 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h6><p>上面使用<code>reactive</code>举例子，现在使用<code>ref</code>举例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; person.cars.c1 &#125;&#125;、&#123;&#123; person.cars.c2 &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;changeCar1&quot;&gt;修改第一台车&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;changeCars&quot;&gt;修改车列表&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  import &#123;ref, watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  let person = ref(&#123;name: &quot;张三&quot;, cars: &#123;c1: &quot;奔驰&quot;, c2: &quot;宝马&quot;&#125;&#125;)</span><br><span class="line">  function changeCar1() &#123;</span><br><span class="line">    person.value.cars.c1 = &quot;奥迪&quot;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCars() &#123;</span><br><span class="line">    person.value.cars = &#123;c1: &quot;雅迪&quot;, c2: &quot;爱玛&quot;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  watch(person.value.cars, (newVal)=&gt;&#123;</span><br><span class="line">    console.log(&quot;姓名发生了变化：&quot;, newVal, person.value.cars)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>监视的时候监视源直接写<code>person.value.cars</code>，这样是可以的，因为一个响应式对象里面某个属性如果也是一个对象，那么这个属性也是响应式的，简单说<code>person.value.cars</code>也是响应式的。<br>和监视一个响应式对象一样，这样写有一个问题，我们只能监视对象内部属性的修改，若是直接改变这个对象是无法监视的，也就是说<code>person.value.cars = &#123;...&#125;</code>是监视不到的。<br>如果想要监视对象本身，可以改为函数式监视：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">watch(()=&gt;person.value.cars, (newVal)=&gt;&#123;</span><br><span class="line">  console.log(&quot;姓名发生了变化：&quot;, newVal, person.value.cars)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>改为函数式监视之后有监视不到内部属性的变化了，此时可以再开启深度监视：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">watch(()=&gt;person.value.cars, (newVal)=&gt;&#123;</span><br><span class="line">  console.log(&quot;姓名发生了变化：&quot;, newVal, person.value.cars)</span><br><span class="line">&#125;, &#123;deep: true&#125;)</span><br></pre></td></tr></table></figure>
<p>所以不论监视的属性是基本数据类型还是对象，都建议使用函数式监视。</p>
<h5 id="监视数组"><a href="#监视数组" class="headerlink" title="监视数组"></a>监视数组</h5><p>数组就比较简单了，把能监视的对象放到一个数组里面统一监视。依然使用上面的例子，假设我们现在想要监视姓名和第一辆车应该怎么做？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; person.cars.c1 &#125;&#125;、&#123;&#123; person.cars.c2 &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;changeName&quot;&gt;修改姓名&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;changeCar1&quot;&gt;修改第一台车&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;changeCars&quot;&gt;修改车列表&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  import &#123;reactive, watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  let person = reactive(&#123;name: &quot;张三&quot;, cars: &#123;c1: &quot;奔驰&quot;, c2: &quot;宝马&quot;&#125;&#125;)</span><br><span class="line">  function changeName() &#123;</span><br><span class="line">    person.name = &quot;李四&quot;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCar1() &#123;</span><br><span class="line">    person.cars.c1 = &quot;奥迪&quot;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCars() &#123;</span><br><span class="line">    person.cars = &#123;c1: &quot;雅迪&quot;, c2: &quot;爱玛&quot;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  watch([()=&gt;person.name, ()=&gt;person.cars.c1], (newVal, oldVal)=&gt;&#123;</span><br><span class="line">    console.log(&quot;发生了变化：&quot;, newVal, oldVal)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>数组元素必须是可监听对象，因此对于基本数据类型还是使用函数式监听。例子里面三个函数都能触发监听，尤其是第三个函数直接修改<code>cars</code>也能被监听<code>c1</code>的监听器捕获到。</p>
<h4 id="watchEffect"><a href="#watchEffect" class="headerlink" title="watchEffect"></a>watchEffect</h4><p><code>watchEffect</code>也是监视，不过与<code>watch</code>不同。<code>watch</code>监视的时候需要传递监视源，而<code>watchEffect</code>不需要，它会根据回调函数内部使用的变量自动推断有哪些监视源。一般用于“遇到特定条件就做特定的事情”这样的场景之中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;add&quot;&gt;点我 sum+1&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123;ref, watchEffect&#125; from &#x27;vue&#x27;</span><br><span class="line">    let sum = ref(0)</span><br><span class="line">    function add() &#123;</span><br><span class="line">        ++sum.value</span><br><span class="line">    &#125;</span><br><span class="line">    watchEffect(()=&gt;&#123;</span><br><span class="line">        if (sum.value &gt; 10) &#123;</span><br><span class="line">            console.log(&quot;sum 超标了：&quot;, sum.value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>这个例子会在变量<code>sum &gt; 10</code>的时候进行输出打印，我们使用<code>watchEffect</code>简化了写法，不需要传递监视源。对于这个例子并没有太高的优越性，如果需要监视的变量有很多，那么不传监视源的优越性就体现出来了。</p>
<h4 id="标签-ref"><a href="#标签-ref" class="headerlink" title="标签 ref"></a>标签 ref</h4><h5 id="获取-DOM"><a href="#获取-DOM" class="headerlink" title="获取 DOM"></a>获取 DOM</h5><p>开发中还有一个很常用的功能就是获取某个 DOM 节点，一种常见的方式是使用 id 获取。但这有一个问题，Vue 组件里面可以包含若干个其它组件，如果两个组件中包含一样的 id，那么你获取的时候就会出现问题。Vue 给出的解决方案是对标签使用<code>ref</code>属性，然后在 js 里面定义一个同名变量就可以：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h2 ref=&quot;title2&quot;&gt;我是 h2&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;show&quot;&gt;点我输出h2对象&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line">    // 这边定义的变量就是上面的 h2 DOM 节点</span><br><span class="line">    let title2 = ref()</span><br><span class="line">    function show() &#123;</span><br><span class="line">        console.log(title2.value)</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h5 id="样式闭合"><a href="#样式闭合" class="headerlink" title="样式闭合"></a>样式闭合</h5><p>视频还看到了一个小知识点，这边就提一下。正常在组件<code>style</code>标签里面写样式，多个组件组合在一起的时候会出现样式污染，因此我们把样式写在<code>&lt;style scoped&gt;&lt;/style&gt;</code>标签里。加上<code>scoped</code>之后样式就会限制本组件内部，因此我们以后写样式几乎必加这个<code>scoped</code>。</p>
<h5 id="组件标签使用-ref"><a href="#组件标签使用-ref" class="headerlink" title="组件标签使用 ref"></a>组件标签使用 ref</h5><p>组件在页面里面也是标签的形式，如果我们给组价加上<code>ref</code>属性会怎么样？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;Person ref=&quot;people&quot; /&gt;</span><br><span class="line">    &lt;button @click=&quot;showPeople&quot;&gt;点我展示组件&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123;ref&#125; from &quot;vue&quot;</span><br><span class="line">    import Person from &quot;./components/Person.vue&quot;</span><br><span class="line"></span><br><span class="line">    let people = ref()</span><br><span class="line">    function showPeople() &#123;</span><br><span class="line">        console.log(people.value)</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>我们这边定义的<code>people</code>就是<code>Person</code>组件对象，既然是组件对象，那么<code>Person</code>组件里面定义的变量或函数能访问到吗？<br>默认情况下父组件是无法访问子组件变量或函数的，想要访问需要在子组件里面将对应的变量或函数暴露出来。我们看<code>Person</code>组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123;ref, defineExpose&#125; from &#x27;vue&#x27;</span><br><span class="line">    let title2 = ref()</span><br><span class="line">    function show() &#123;</span><br><span class="line">        console.log(title2.value)</span><br><span class="line">    &#125;</span><br><span class="line">    defineExpose(&#123;title2, show&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>这边使用<code>defineExpose</code>将能被父组件调用的变量或函数暴露出去，这样我们就可以在父组件使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let people = ref()</span><br><span class="line">function showPeople() &#123;</span><br><span class="line">    console.log(people.value)</span><br><span class="line">    console.log(people.value.title2)</span><br><span class="line">    people.value.show()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这边的<code>people</code>与子组件的<code>ref</code>对应，我们拿到子组件引用之后，可以访问子组件暴露出来的变量或函数。</p>
<h4 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h4><p>有时候我们想给一个对象制定规范，比如里面有哪些属性，这些属性分别是什么类型，如果不满足这些规范编译器会给出提示。这时候就需要使用 TS 里面的接口了，一般情况下我们会按照下列方式创建接口：</p>
<ol>
<li>在<code>src</code>目录下创建目录<code>types</code></li>
<li>在<code>types</code>目录下创建一个 TS 文件，为方便一般起名叫<code>index.ts</code>。<ul>
<li>起名叫<code>index.ts</code>，别人导入的时候直接导入<code>@/types</code></li>
<li>起其它名字例如<code>other.ts</code>，导入时需要<code>@/types/other</code></li>
<li>在 Vue 里面<code>@</code>表示<code>src</code></li>
</ul>
</li>
<li>在 TS 文件里面编写接口，我们以<code>PersonInter</code>举例：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export 之后别人才能 import，定义接口关键字是 interface</span></span><br><span class="line">export <span class="keyword">interface</span> <span class="title class_">PersonInter</span> &#123;</span><br><span class="line">    id: string,  <span class="comment">// 属性名: 值类型</span></span><br><span class="line">    name: string,</span><br><span class="line">    age: number,</span><br><span class="line">    score?: number  <span class="comment">// ?: 表示这个属性可有可无</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
接口创建好之后，别人想要使用这个规范，可以：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    // 导入的时候需要在接口前面写 type 关键字</span><br><span class="line">    import &#123;type PersonInter&#125; from &#x27;@/types&#x27;</span><br><span class="line"></span><br><span class="line">    // 变量后面写上冒号，再跟上接口约束</span><br><span class="line">    let person: PersonInter = &#123;id: &quot;abc&quot;, name: &quot;张三&quot;, age: 19&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
我们现在会定义满足接口约束的变量，如果我想定义一个满足接口约束的数组应该怎么做？<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let person: Array&lt;PersonInter&gt; = [&#123;id: &quot;abc&quot;, name: &quot;张三&quot;, age: 19&#125;]</span><br></pre></td></tr></table></figure>
实际上就是泛型，一般我们会将这个数组类型自定义一个名称，可以简化书写：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 TS 文件中</span></span><br><span class="line">export <span class="type">type</span> <span class="variable">PersonList</span> <span class="operator">=</span> Array&lt;PersonInter&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用的时候直接导入就可以使用了</span></span><br><span class="line"><span class="keyword">import</span> &#123;type PersonList&#125; from <span class="string">&#x27;@/types&#x27;</span></span><br><span class="line">let person: PersonList = [&#123;id: <span class="string">&quot;abc&quot;</span>, name: <span class="string">&quot;张三&quot;</span>, age: <span class="number">19</span>&#125;]</span><br></pre></td></tr></table></figure>
如果我想把满足接口定义的数据改成响应式数据，可以这样：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">let</span> <span class="variable">person</span> <span class="operator">=</span> ref&lt;PersonInter&gt;(&#123;</span><br><span class="line">    id: <span class="string">&#x27;1001&#x27;</span>,</span><br><span class="line">    name: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">    age: <span class="number">18</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">let</span> <span class="variable">person</span> <span class="operator">=</span> reactive&lt;PersonInter&gt;(&#123;</span><br><span class="line">    id: <span class="string">&#x27;1001&#x27;</span>,</span><br><span class="line">    name: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">    age: <span class="number">18</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="props"><a href="#props" class="headerlink" title="props"></a>props</h4><p>父组件给子组件传递数据是很常见的操作，在 Vue 里分两步：父组件传，子组件收。</p>
<h5 id="父组件传数据"><a href="#父组件传数据" class="headerlink" title="父组件传数据"></a>父组件传数据</h5><p>父组件给子组件数据很简单，在子组件的标签里添加上属性就可以了：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Person info=<span class="string">&quot;消息&quot;</span> :persons=<span class="string">&quot;persons&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// persons 是定义在父组件里的数据</span></span><br><span class="line"><span class="type">let</span> <span class="variable">persons</span> <span class="operator">=</span> [</span><br><span class="line">    &#123;id: <span class="string">&quot;1001&quot;</span>, name: <span class="string">&quot;张三&quot;</span>, age: <span class="number">18</span>&#125;,</span><br><span class="line">    &#123;id: <span class="string">&quot;1002&quot;</span>, name: <span class="string">&quot;李四&quot;</span>, age: <span class="number">19</span>&#125;,</span><br><span class="line">    &#123;id: <span class="string">&quot;1003&quot;</span>, name: <span class="string">&quot;王五&quot;</span>, age: <span class="number">20</span>&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>我们这边给子组件传递了一个字符串<code>info</code>和一个人员数组<code>persons</code>。</p>
<h5 id="子组件收数据"><a href="#子组件收数据" class="headerlink" title="子组件收数据"></a>子组件收数据</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123; info &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    &lt;div v-for=&quot;(p, i) in persons&quot; :key=&quot;i&quot;&gt;&#123;&#123; p &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  import &#123;defineProps&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  defineProps([&#x27;info&#x27;, &#x27;persons&#x27;])</span><br><span class="line"></span><br><span class="line">  info = &quot;哈哈&quot;  // 错误！接受的数据只能作用于模板里</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>子组件接受数据使用<code>defineProps</code>，它需要一个数组表示要接受的数据名称，名称要和父组件给的一致。<strong>注意，数据接收下来之后可以在模板里面使用，但是 js 里面是不能使用的。</strong><br>想要在 js 里面使用传过来的变量，我们可以使用<code>defineProps</code>的返回值：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let data = defineProps([&#x27;info&#x27;, &#x27;persons&#x27;])</span><br><span class="line">console.log(data.info, data.persons)</span><br></pre></td></tr></table></figure>
<p><code>defineProps</code>的返回值是一个对象，子组件接收的数据都在这个对象里。<br>如果我们想在子组件对父组件传过来的数据做类型限制，可以这样用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 给 defineProps 函数加泛型，里面传入各个数据的类型约束</span></span><br><span class="line"><span class="type">let</span> <span class="variable">data</span> <span class="operator">=</span> defineProps&lt;&#123;persons: PersonList&#125;&gt;()</span><br></pre></td></tr></table></figure>
<p>再进一步，对于某个数据父组件可传可不传，如果不传子组件能够获取一个默认值：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">let</span> <span class="variable">data</span> <span class="operator">=</span> withDefaults(defineProps&lt;&#123;persons?: PersonList&#125;&gt;(), &#123;</span><br><span class="line">    persons: ()=&gt; [&#123;id: <span class="string">&quot;001&quot;</span>, name: <span class="string">&quot;工具人&quot;</span>, age: <span class="number">10</span>&#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ol>
<li>首先通过<code>persons?: PersonList</code>使<code>persons</code>变为可传可不传</li>
<li>是<code>withDefaults</code>将整个<code>defineProps</code>调用作为第一个参数，第二个参数是一个对象用来配置默认值，<strong>对象里面的属性值必须写成函数的形式</strong>。</li>
</ol>
<p><strong>注意：默认值写法只能写在有 TS 限制类型的</strong><code>**defineProps**</code><strong>上。</strong><br>一个小知识点，所有<code>define</code>开头的函数（<code>defineProps</code>、<code>defineExpose</code>等）其实都是默认导入的，我们可以手动不导入。</p>
<h4 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h4><h5 id="Vue2-生命周期"><a href="#Vue2-生命周期" class="headerlink" title="Vue2 生命周期"></a>Vue2 生命周期</h5><p>Vue2 有 4 个生命阶段，每个阶段有两个钩子函数，共 8 个钩子函数。</p>
<table>
<thead>
<tr>
<th><strong>状态</strong></th>
<th><strong>周期</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>beforeCreate</code></td>
<td>创建前</td>
</tr>
<tr>
<td><code>created</code></td>
<td>创建后</td>
</tr>
<tr>
<td><code>beforeMount</code></td>
<td>挂载前</td>
</tr>
<tr>
<td><code>mounted</code></td>
<td>挂载完成，一般在里面发送数据请求</td>
</tr>
<tr>
<td><code>beforeUpdate</code></td>
<td>更新前</td>
</tr>
<tr>
<td><code>updated</code></td>
<td>更新后</td>
</tr>
<tr>
<td><code>beforeDestroy</code></td>
<td>销毁前</td>
</tr>
<tr>
<td><code>destroyed</code></td>
<td>销毁后</td>
</tr>
</tbody></table>
<h5 id="Vue3-生命周期"><a href="#Vue3-生命周期" class="headerlink" title="Vue3 生命周期"></a>Vue3 生命周期</h5><p>Vue3 的生命周期和 Vue2 有些不同，我们直接看代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  import &#123;onBeforeMount, onMounted, onBeforeUpdate, </span><br><span class="line">          onUpdated, onBeforeUnmount, onUnmounted&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  console.log(&quot;创建&quot;)</span><br><span class="line"></span><br><span class="line">  onBeforeMount(()=&gt;&#123;</span><br><span class="line">    console.log(&quot;挂载前&quot;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onMounted(()=&gt;&#123;</span><br><span class="line">    console.log(&quot;挂载完成&quot;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onBeforeUpdate(()=&gt;&#123;</span><br><span class="line">    console.log(&quot;更新前&quot;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onUpdated(()=&gt;&#123;</span><br><span class="line">    console.log(&quot;更新完成&quot;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onBeforeUnmount(()=&gt;&#123;</span><br><span class="line">    console.log(&quot;卸载前&quot;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onUnmounted(()=&gt;&#123;</span><br><span class="line">    console.log(&quot;写在完成&quot;)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>Vue3 可以直接在<code>setup</code>里面做创建时要做的操作</li>
<li>其它所有钩子函数也都换了名字，但套路是一样的</li>
<li>Vue3 没有销毁的钩子，取而代之的是卸载的钩子函数</li>
<li>调用某个钩子时需要传进去一个回调函数，在回调函数里面写要做的事情</li>
</ol>
<h4 id="自定义-Hooks"><a href="#自定义-Hooks" class="headerlink" title="自定义 Hooks"></a>自定义 Hooks</h4><p>我们在组件里面总会定义变量与操作它的函数、计算属性、监视器等，当代码多的时候这些内容混杂在一起就很混乱。于是我们可以利用自定义 Hooks 将同一个逻辑抽出来，看例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;add&quot;&gt;点我sum+1&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123;ref, watch&#125; from &#x27;vue&#x27;</span><br><span class="line">    let sum = ref(0)</span><br><span class="line">    function add() &#123;</span><br><span class="line">        sum.value++</span><br><span class="line">    &#125;</span><br><span class="line">    watch(sum, (newVal)=&gt;&#123;</span><br><span class="line">        console.log(newVal)</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>这个例子很简单，因为整个组件只有一个逻辑，就是操作变量<code>sum</code>。为了演示，我们打算将所有关于<code>sum</code>的逻辑抽出来，操作步骤：</p>
<ol>
<li>在<code>src</code>下创建目录<code>hooks</code></li>
<li>在<code>hooks</code>目录下新建文件<code>useSum.ts</code>，名字需以<code>use</code>开头</li>
<li>然后将所有相关的逻辑写到这个文件中<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import &#123;ref, watch&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default function() &#123;</span><br><span class="line">    let sum = ref(0)</span><br><span class="line">    function add() &#123;</span><br><span class="line">        sum.value++</span><br><span class="line">    &#125;</span><br><span class="line">    watch(sum, (newVal)=&gt;&#123;</span><br><span class="line">        console.log(newVal)</span><br><span class="line">    &#125;)</span><br><span class="line">    return &#123;sum, add&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
整个逻辑部分要导出为一个函数，函数的返回值是所有需要导出的变量、函数、计算属性等。<br>接下来我们在组件中使用这个 hook：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;add&quot;&gt;点我sum+1&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import useSum from &#x27;@/hooks/useSum&#x27;</span><br><span class="line"></span><br><span class="line">    let &#123;sum, add&#125; = useSum()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
这样就实现了逻辑的抽离，当我们业务代码非常臃肿的时候这么做是非常友好的。而且在 hook 里面还可以写生命周期钩子函数，和我们直接在组件里面使用没有区别。</li>
</ol>
<h3 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>首先我们需要下载安装路由模块，命令是：<code>npm i vue-router</code></p>
<h4 id="创建路由器"><a href="#创建路由器" class="headerlink" title="创建路由器"></a>创建路由器</h4><p>接下来我们需要自定义一个路由器，在路由器里面指定访问路径与展示组件的联系。我们先在<code>src</code>下创建目录<code>router</code>，为导入方便直接在<code>router</code>里面创建<code>index.ts</code>，最后我们就在<code>index.ts</code>里面创建路由器并导出：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/Home.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">News</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/News.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/About.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 createRouter 函数创建路由器</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),  <span class="comment">// 指定路由工作模式</span></span><br><span class="line">  <span class="attr">routes</span>: [  <span class="comment">// 数组中每个对象表示路由配置</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Home</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">News</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">About</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 最后要导出这个路由器，不然别人拿不到</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
<h4 id="应用路由器"><a href="#应用路由器" class="headerlink" title="应用路由器"></a>应用路由器</h4><p>创建好路由器之后，我们需要在<code>main.ts</code>里创建 APP 时使用路由器：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">use</span>(router)  <span class="comment">// 使用我们定义的路由器</span></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p>路由器被我配置到应用中之后，我们还需要指定一个<code>RouterView</code>，这个组件表示根据路径得到的组件显示在哪，可以理解成一个窗口。而且链接跳转也不能直接使用<code>&lt;a&gt;</code>标签，要使用 Vue 提供的<code>RouterLink</code>组件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;路由功能测试&lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;!-- 导航区，需要使用 RouterLink 组件进行页面跳转 --&gt;</span><br><span class="line">        &lt;RouterLink to=&quot;/home&quot; active-class=&quot;linkActive&quot;&gt;首页&lt;/RouterLink&gt;</span><br><span class="line">        &lt;RouterLink to=&quot;/news&quot; active-class=&quot;linkActive&quot;&gt;新闻&lt;/RouterLink&gt;</span><br><span class="line">        &lt;!-- to 里面还可以传入一个对象，对象的 path 属性作为请求路径 --&gt;</span><br><span class="line">        &lt;RouterLink :to=&quot;&#123;path: &#x27;/about&#x27;&#125;&quot; active-class=&quot;linkActive&quot;&gt;关于&lt;/RouterLink&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;!-- RouterView 是组件展示窗口 --&gt;</span><br><span class="line">        &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123;RouterView, RouterLink&#125; from &#x27;vue-router&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p><code>RouterLink</code>有<code>active-class</code>属性，里面传一个 CSS 类进去，表示链接被激活的样式。</p>
<h4 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h4><p>我们将自定义的组件人为区分成一般组件和路由组件，那如何区分这两种组件？举个例子，假设我们自定义了<code>Demo.vue</code>，如果我们在某个地方这么使用<code>&lt;Demo/&gt;</code>它，那么他就是一般组件，否则就是路由组价。因为路由组件是根据请求路径自动展示的，不是我们手动写标签展示的。<br>之所以区分这个，是应用中一般组件放在<code>src/components</code>目录下，路由组件放在<code>src/pages</code>或<code>src/views</code>目录下。<strong>通过路由切换组件的时候，原来的组件会卸载掉。</strong></p>
<h4 id="路由器的工作模式"><a href="#路由器的工作模式" class="headerlink" title="路由器的工作模式"></a>路由器的工作模式</h4><ol>
<li><code>history</code>模式<ul>
<li>优点：URL 更加美观，不带有<code>#</code>，更接近传统网站的 URL</li>
<li>缺点：后期项目上线需要服务端配合处理路径问题</li>
<li>配置：在路由器里面使用<code>history: createWebHistory()</code></li>
<li>应用场景：网站直接面对大众时一般采用这种策略</li>
</ul>
</li>
<li><code>hash</code>模式<ul>
<li>优点：兼容性好，不需要服务端配合处理</li>
<li>缺点：URL 带有<code>#</code>不美观且 SEO 优化差</li>
<li>配置：在路由器里面使用<code>history: createWebHashHistory()</code></li>
<li>应用场景：一般的后台管理系统都是采用这种策略</li>
</ul>
</li>
</ol>
<h4 id="路由的几种方式"><a href="#路由的几种方式" class="headerlink" title="路由的几种方式"></a>路由的几种方式</h4><p>我们在<code>RouterLink</code>的<code>to</code>属性里面指定路径的时候有三种写法：</p>
<ol>
<li>直接写字符串，例如<code>&lt;RouterLink to=&quot;/home&quot;&gt;xxx&lt;/RouterLink&gt;</code></li>
<li>使用对象指定<code>path</code>，例如<code>&lt;RouterLink :to=&quot;&#123;path: &#39;/home&#39;&#125;&quot;&gt;xxx&lt;/RouterLink&gt;</code></li>
<li>使用对象指定<code>name</code>，例如<code>&lt;RouterLink :to=&quot;&#123;name: &#39;home&#39;&#125;&quot;&gt;xxx&lt;/RouterLink&gt;</code>，这种写法需要在路由器里面给规则配置名称，如下：<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  name<span class="punctuation">:</span> &#x27;about&#x27;<span class="punctuation">,</span></span><br><span class="line">  path<span class="punctuation">:</span> &#x27;/about&#x27;<span class="punctuation">,</span></span><br><span class="line">  component<span class="punctuation">:</span> About</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="路由嵌套"><a href="#路由嵌套" class="headerlink" title="路由嵌套"></a>路由嵌套</h4><p>一个组件里面有路由显示的界面，路由出来的组件里面仍然有路由，这叫做路由嵌套。下图描述了一种路由嵌套的应用场景：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/1561375/1708516085272-12432f3b-0e20-46cb-8270-577715674adb.png#averageHue=%23fbf7f5&clientId=ua750f794-3c8d-4&from=paste&height=571&id=uf4a6fb27&originHeight=1142&originWidth=2068&originalType=binary&ratio=2&rotation=0&showTitle=false&size=119004&status=done&style=none&taskId=u95d6b775-c71d-43dc-9fa8-654068011e2&title=&width=1034" alt="image.png"><br>新闻界面的代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;left&quot;&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;news in newsList&quot; :key=&quot;news.id&quot;&gt;</span><br><span class="line">        &lt;!-- 左侧导航栏，链接是 /news 的子链接 --&gt;</span><br><span class="line">        &lt;RouterLink to=&quot;/news/detail&quot;&gt;&#123;&#123; news.title &#125;&#125;&lt;/RouterLink&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;right&quot;&gt;</span><br><span class="line">    &lt;!-- 内容展示区 --&gt;</span><br><span class="line">    &lt;RouterView /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p>配置路由器的时候在新闻路由里面添加<code>children</code>属性：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  path<span class="punctuation">:</span> &#x27;/news&#x27;<span class="punctuation">,</span></span><br><span class="line">  component<span class="punctuation">:</span> News<span class="punctuation">,</span></span><br><span class="line">  children<span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      path<span class="punctuation">:</span> &#x27;detail&#x27;<span class="punctuation">,</span></span><br><span class="line">      component<span class="punctuation">:</span> Detail</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>仔细观察可以发现，子级路由的<code>path</code>属性不是<code>/</code>开头，而是直接写路径。因为如果你加了<code>/</code>开头这就表示根下的<code>detail</code>。 </p>
<h4 id="路由参数"><a href="#路由参数" class="headerlink" title="路由参数"></a>路由参数</h4><p>我们使用路由跳转的时候可以携带参数，参数分为<code>query</code>和<code>params</code>。</p>
<h5 id="query-参数"><a href="#query-参数" class="headerlink" title="query 参数"></a>query 参数</h5><p>传递参数有两种方式，主要修改<code>RouterLink</code>的<code>to</code>属性，看代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- 方式一：直接在路径后面拼接字符串 --&gt;</span><br><span class="line">    &lt;RouterLink to=&quot;/news/detail?id=abc&quot;&gt;&#123;&#123; news.title &#125;&#125;&lt;/RouterLink&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 方式二：使用对象，对象里用 query 属性携带参数 --&gt;</span><br><span class="line">    &lt;RouterLink :to=&quot;&#123;</span><br><span class="line">        path: &#x27;/news/detail&#x27;,</span><br><span class="line">        query: &#123;</span><br><span class="line">            id: &#x27;abc&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;&quot;&gt;</span><br><span class="line">        &#123;&#123; news.title &#125;&#125;</span><br><span class="line">    &lt;/RouterLink&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p>不论使用哪种方式，最终这些参数都会通过路径携带过去。<br>路由到的组件想要获取传过来的<code>query</code>参数可以：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123; useRoute &#125; from &#x27;vue-router&#x27;</span><br><span class="line"></span><br><span class="line">    const route = useRoute()</span><br><span class="line">    // 所有的 query 参数都可以在 route.query 里面找到</span><br><span class="line">    console.log(route.query.id)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h5 id="params-参数"><a href="#params-参数" class="headerlink" title="params 参数"></a>params 参数</h5><p><code>params</code>参数的形式是<code>/path/p1/p2</code>，这边<code>/path</code>是请求路径，<code>p1</code>和<code>p2</code>是两个参数。这个参数看起来和路径一样，是如何区分的呢？首先我们需要现在路由器里面配置：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  path<span class="punctuation">:</span> &#x27;/news&#x27;<span class="punctuation">,</span></span><br><span class="line">  component<span class="punctuation">:</span> News<span class="punctuation">,</span></span><br><span class="line">  children<span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      name<span class="punctuation">:</span> &#x27;detail&#x27;<span class="punctuation">,</span></span><br><span class="line">      path<span class="punctuation">:</span> &#x27;detail/<span class="punctuation">:</span>id/<span class="punctuation">:</span>name?&#x27;<span class="punctuation">,</span></span><br><span class="line">      component<span class="punctuation">:</span> Detail</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>我们这边的<code>path</code>指定为<code>detail/:id/:name</code>，这就表示在路径<code>detail</code>后面会有两个参数，这两个参数分别叫做<code>id</code>与<code>name</code>。<br><code>name</code>参数使用的是<code>:name?</code>表示这个参数可传可不传。<br>我们在<code>RouterLink</code>里面指定参数的时候也有两种方式：<br>方式一很简单，就是在路径后面拼接参数就可以了，这些参数和路由里面定义的对应：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;RouterLink to=&quot;/news/detail/abc/张三&quot;&gt;&#123;&#123; news.title &#125;&#125;&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;RouterLink :to=&quot;&#123;</span><br><span class="line">  name: &#x27;detail&#x27;,</span><br><span class="line">  params: &#123;</span><br><span class="line">  id: &#x27;abc&#x27;,</span><br><span class="line">  name: &#x27;张三&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;&quot;&gt;</span><br><span class="line">  &#123;&#123; news.title &#125;&#125;</span><br><span class="line">&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure>
<p>这是方式二，我们仍然使用对象的方式传参。不过这次将参数写进<code>params</code>属性里面。<br>注意：这里有一个坑，<code>params</code>参数使用对象携带的话，不能通过<code>path</code>配置路由路径，只能通过<code>name</code>指定。<br>数据传过去了，组件接收的时候写法和<code>query</code>基本一致，不过访问的是<code>params</code>属性：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  import &#123; useRoute &#125; from &#x27;vue-router&#x27;</span><br><span class="line"></span><br><span class="line">  const route = useRoute()</span><br><span class="line">  // 所有的 params 参数都可以在 route.params 里面找到</span><br><span class="line">  console.log(route.params.id)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h4 id="props-配置"><a href="#props-配置" class="headerlink" title="props 配置"></a>props 配置</h4><p>我们现在可以接收参数，但在组件内访问变量的时候还是很麻烦。需要写<code>route.query.</code>或<code>route.params.</code>前缀，我想直接访问传过来的参数行不行？行，下面介绍几种写法。</p>
<h5 id="配置-props-属性"><a href="#配置-props-属性" class="headerlink" title="配置 props 属性"></a>配置 props 属性</h5><p>我们在路由器配置界面将子组件的<code>props</code>属性配置为<code>true</code>，这样会将参数作为属性传给组件。<br>路由器配置：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    path<span class="punctuation">:</span> &#x27;/news&#x27;<span class="punctuation">,</span></span><br><span class="line">    component<span class="punctuation">:</span> News<span class="punctuation">,</span></span><br><span class="line">    children<span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          name<span class="punctuation">:</span> &#x27;detail&#x27;<span class="punctuation">,</span></span><br><span class="line">          path<span class="punctuation">:</span> &#x27;detail/<span class="punctuation">:</span>id/<span class="punctuation">:</span>name&#x27;<span class="punctuation">,</span></span><br><span class="line">          component<span class="punctuation">:</span> Detail<span class="punctuation">,</span></span><br><span class="line">          props<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p><code>props: true</code>是配置在子组件上的。<br>传参还是使用一样的传法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;RouterLink </span><br><span class="line">  to=&quot;/news/detail/abc/张三&quot;&gt;</span><br><span class="line">  &#123;&#123; news.title &#125;&#125;</span><br><span class="line">&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure>
<p>组件内接收参数时：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;&#123;&#123; id &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;&#123;&#123; name &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  defineProps([&#x27;id&#x27;, &#x27;name&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>实际上如果将<code>props</code>设为<code>true</code>，路由渲染的时候相当于渲染<code>&lt;Detail id=&quot;abc&quot; name=&quot;张三&quot; /&gt;</code>，那么在组件内通过<code>defineProps</code>获取属性也就不奇怪了。<br><strong>注意：这种方式只能配合</strong><code>**params**</code><strong>传参使用，</strong><code>**query**</code><strong>传参是不能使用的。</strong></p>
<h5 id="自定义-props"><a href="#自定义-props" class="headerlink" title="自定义 props"></a>自定义 props</h5><p>第一种很好用，但只能配合<code>params</code>传参的方式。如果我想使用<code>query</code>传参怎么办？此时我们可以自定义 props，首先在路由器里面配置：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  path<span class="punctuation">:</span> &#x27;/news&#x27;<span class="punctuation">,</span></span><br><span class="line">  component<span class="punctuation">:</span> News<span class="punctuation">,</span></span><br><span class="line">  children<span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      name<span class="punctuation">:</span> &#x27;detail&#x27;<span class="punctuation">,</span></span><br><span class="line">      path<span class="punctuation">:</span> &#x27;detail&#x27;<span class="punctuation">,</span></span><br><span class="line">      component<span class="punctuation">:</span> Detail<span class="punctuation">,</span></span><br><span class="line">      props(route) <span class="punctuation">&#123;</span></span><br><span class="line">        return route.query</span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>我们这边定义了<code>props</code>函数，这个函数有一个参数<code>route</code>，这个<code>route</code>就是我们之前获取数据时使用的<code>useRoute()</code>函数的返回值。<br><code>props()</code>函数的返回值将会被加到组件的<code>props</code>里面，例如我们这边直接将<code>route.query</code>返回出去，这样所有的参数都会被添加到<code>props</code>里。<br>组件访问数据的时候还是使用<code>defineProps([&#39;id&#39;, &#39;name&#39;])</code></p>
<h5 id="固定-props"><a href="#固定-props" class="headerlink" title="固定 props"></a>固定 props</h5><p>第三种方法能将固定的数据添加到组件的<code>props</code>里面，直接看路由器的配置：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    path<span class="punctuation">:</span> &#x27;/news&#x27;<span class="punctuation">,</span></span><br><span class="line">    component<span class="punctuation">:</span> News<span class="punctuation">,</span></span><br><span class="line">    children<span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            name<span class="punctuation">:</span> &#x27;detail&#x27;<span class="punctuation">,</span></span><br><span class="line">            path<span class="punctuation">:</span> &#x27;detail&#x27;<span class="punctuation">,</span></span><br><span class="line">            component<span class="punctuation">:</span> Detail<span class="punctuation">,</span></span><br><span class="line">            props<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                id<span class="punctuation">:</span> &#x27;abc&#x27;<span class="punctuation">,</span></span><br><span class="line">                name<span class="punctuation">:</span> &#x27;王五&#x27;</span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="replace-属性"><a href="#replace-属性" class="headerlink" title="replace 属性"></a>replace 属性</h4><p>正常浏览器的历史记录是<code>push</code>模式，即浏览器维护一个栈，每次访问新页面就将这个网址入栈，当前访问的永远在栈顶。初次之外，还有<code>replace</code>模式，这个模式下每次访问新页面都会将新网址替换掉栈顶的网址（而不是入栈），这样做你前一次访问的页面就无法通过回退访问。<br>想要开启<code>replace</code>模式，只需要在<code>RouterLink</code>里面定义<code>replace</code>属性：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;RouterLink replace to=&quot;/home&quot; active-class=&quot;linkActive&quot;&gt;首页&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure>
<h4 id="编程式路由导航"><a href="#编程式路由导航" class="headerlink" title="编程式路由导航"></a>编程式路由导航</h4><p>目前我们路由导航都是通过点击<code>RouterLink</code>实现的跳转，如果我想在代码里实现跳转应该怎么做：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123; useRouter &#125; from &#x27;vue-router&#x27;</span><br><span class="line"></span><br><span class="line">    const router = useRouter()</span><br><span class="line">    router.push(&#x27;/home&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p><code>useRouter()</code>函数的返回值就是路由器对象，调用路由器的<code>push</code>方法就可以实现跳转。<br>除此之外，实际上<code>push</code>函数的参数和<code>RouterLink</code>组件的<code>to</code>属性一样，可以传字符串也可以传一个对象。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123; useRouter &#125; from &#x27;vue-router&#x27;</span><br><span class="line"></span><br><span class="line">    const router = useRouter()</span><br><span class="line">    router.push(&#123;</span><br><span class="line">        path: &#x27;/news/detail&#x27;,</span><br><span class="line">        query: &#123;</span><br><span class="line">            id: &#x27;abc&#x27;,</span><br><span class="line">            name: &#x27;张三&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>所以传参或者配置<code>props</code>都是一样的，子组件解析的方式也是不需要变化的。<br>和上一节呼应，<code>push</code>是有记录的跳转，自然还有<code>replace</code>方法表示无记录跳转。</p>
<h4 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h4><p>重定向是使用比较多的功能，例如我们访问一个页面的时候如果没有登录会重定向到登录界面。我们只需要在路由器配置页面添加一个配置项：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  path<span class="punctuation">:</span> &#x27;/&#x27;<span class="punctuation">,</span></span><br><span class="line">  redirect<span class="punctuation">:</span> &#x27;/home&#x27;</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>配置好之后，访问根路径会自动重定向到<code>/home</code>页面。</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Vue/" rel="tag"># Vue</a>
          
            <a href="/tags/Vue3/" rel="tag"># Vue3</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2023/08/23/Redis/" rel="next" title="Redis">
                <i class="fa fa-chevron-left"></i> Redis
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2024/01/03/Vue3%20%E7%B3%BB%E5%88%97%EF%BC%8802%EF%BC%89/" rel="prev" title="Vue3 系列（02）">
                Vue3 系列（02） <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/index.html">
              
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%80%E5%A7%8B"><span class="nav-number">1.</span> <span class="nav-text">开始</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-Node-js"><span class="nav-number">1.1.</span> <span class="nav-text">安装 Node.js</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E-Vite-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="nav-number">1.2.</span> <span class="nav-text">基于 Vite 创建项目</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="nav-number">1.3.</span> <span class="nav-text">目录结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%96%87%E4%BB%B6%E7%9A%84%E8%A7%A3%E8%AF%BB"><span class="nav-number">1.4.</span> <span class="nav-text">基本文件的解读</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#index-html"><span class="nav-number">1.4.1.</span> <span class="nav-text">index.html</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#src-main-ts"><span class="nav-number">1.4.2.</span> <span class="nav-text">src&#x2F;main.ts</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E8%AF%AD%E6%B3%95"><span class="nav-number">2.</span> <span class="nav-text">核心语法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B0%E6%97%A7-Vue"><span class="nav-number">2.1.</span> <span class="nav-text">新旧 Vue</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Vue2-Demo"><span class="nav-number">2.1.1.</span> <span class="nav-text">Vue2 Demo</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Vue3-Demo"><span class="nav-number">2.1.2.</span> <span class="nav-text">Vue3 Demo</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Vue2-%E4%B8%8E-Vue3-%E6%B7%B7%E5%90%88"><span class="nav-number">2.1.3.</span> <span class="nav-text">Vue2 与 Vue3 混合</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#setup-%E8%AF%AD%E6%B3%95%E7%B3%96"><span class="nav-number">2.2.</span> <span class="nav-text">setup 语法糖</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE"><span class="nav-number">2.3.</span> <span class="nav-text">响应式数据</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.3.1.</span> <span class="nav-text">基本数据类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.3.2.</span> <span class="nav-text">对象类型</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#reactive"><span class="nav-number">2.3.2.1.</span> <span class="nav-text">reactive</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#ref"><span class="nav-number">2.3.2.2.</span> <span class="nav-text">ref</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ref-%E8%B8%A9%E5%9D%91"><span class="nav-number">2.3.3.</span> <span class="nav-text">ref 踩坑</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#reactive-%E8%B8%A9%E5%9D%91"><span class="nav-number">2.3.4.</span> <span class="nav-text">reactive 踩坑</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%BB%BA%E8%AE%AE"><span class="nav-number">2.3.5.</span> <span class="nav-text">使用建议</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#toRefs-toRef"><span class="nav-number">2.4.</span> <span class="nav-text">toRefs&#x2F;toRef</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#toRefs"><span class="nav-number">2.4.1.</span> <span class="nav-text">toRefs</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#toRef"><span class="nav-number">2.4.2.</span> <span class="nav-text">toRef</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="nav-number">2.5.</span> <span class="nav-text">计算属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#watch"><span class="nav-number">2.6.</span> <span class="nav-text">watch</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#ref-%E5%AE%9A%E4%B9%89%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE"><span class="nav-number">2.6.1.</span> <span class="nav-text">ref 定义的基本类型数据</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ref-%E5%AE%9A%E4%B9%89%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE"><span class="nav-number">2.6.2.</span> <span class="nav-text">ref 定义的对象类型数据</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#reactive-%E5%AE%9A%E4%B9%89%E7%9A%84%E5%AF%B9%E8%B1%A1%E6%95%B0%E6%8D%AE"><span class="nav-number">2.6.3.</span> <span class="nav-text">reactive 定义的对象数据</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%9B%91%E8%A7%86%E5%B1%9E%E6%80%A7"><span class="nav-number">2.6.4.</span> <span class="nav-text">监视属性</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.6.4.1.</span> <span class="nav-text">基本类型</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.6.4.2.</span> <span class="nav-text">对象</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%9B%91%E8%A7%86%E6%95%B0%E7%BB%84"><span class="nav-number">2.6.5.</span> <span class="nav-text">监视数组</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#watchEffect"><span class="nav-number">2.7.</span> <span class="nav-text">watchEffect</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%87%E7%AD%BE-ref"><span class="nav-number">2.8.</span> <span class="nav-text">标签 ref</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96-DOM"><span class="nav-number">2.8.1.</span> <span class="nav-text">获取 DOM</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A0%B7%E5%BC%8F%E9%97%AD%E5%90%88"><span class="nav-number">2.8.2.</span> <span class="nav-text">样式闭合</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E6%A0%87%E7%AD%BE%E4%BD%BF%E7%94%A8-ref"><span class="nav-number">2.8.3.</span> <span class="nav-text">组件标签使用 ref</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3"><span class="nav-number">2.9.</span> <span class="nav-text">接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#props"><span class="nav-number">2.10.</span> <span class="nav-text">props</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%88%B6%E7%BB%84%E4%BB%B6%E4%BC%A0%E6%95%B0%E6%8D%AE"><span class="nav-number">2.10.1.</span> <span class="nav-text">父组件传数据</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AD%90%E7%BB%84%E4%BB%B6%E6%94%B6%E6%95%B0%E6%8D%AE"><span class="nav-number">2.10.2.</span> <span class="nav-text">子组件收数据</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">2.11.</span> <span class="nav-text">生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Vue2-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">2.11.1.</span> <span class="nav-text">Vue2 生命周期</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Vue3-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">2.11.2.</span> <span class="nav-text">Vue3 生命周期</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89-Hooks"><span class="nav-number">2.12.</span> <span class="nav-text">自定义 Hooks</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1"><span class="nav-number">3.</span> <span class="nav-text">路由</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">3.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="nav-number">3.2.</span> <span class="nav-text">创建路由器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="nav-number">3.3.</span> <span class="nav-text">应用路由器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8"><span class="nav-number">3.4.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="nav-number">3.5.</span> <span class="nav-text">注意点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F"><span class="nav-number">3.6.</span> <span class="nav-text">路由器的工作模式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="nav-number">3.7.</span> <span class="nav-text">路由的几种方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%B5%8C%E5%A5%97"><span class="nav-number">3.8.</span> <span class="nav-text">路由嵌套</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0"><span class="nav-number">3.9.</span> <span class="nav-text">路由参数</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#query-%E5%8F%82%E6%95%B0"><span class="nav-number">3.9.1.</span> <span class="nav-text">query 参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#params-%E5%8F%82%E6%95%B0"><span class="nav-number">3.9.2.</span> <span class="nav-text">params 参数</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#props-%E9%85%8D%E7%BD%AE"><span class="nav-number">3.10.</span> <span class="nav-text">props 配置</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-props-%E5%B1%9E%E6%80%A7"><span class="nav-number">3.10.1.</span> <span class="nav-text">配置 props 属性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89-props"><span class="nav-number">3.10.2.</span> <span class="nav-text">自定义 props</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9B%BA%E5%AE%9A-props"><span class="nav-number">3.10.3.</span> <span class="nav-text">固定 props</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#replace-%E5%B1%9E%E6%80%A7"><span class="nav-number">3.11.</span> <span class="nav-text">replace 属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%96%E7%A8%8B%E5%BC%8F%E8%B7%AF%E7%94%B1%E5%AF%BC%E8%88%AA"><span class="nav-number">3.12.</span> <span class="nav-text">编程式路由导航</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">3.13.</span> <span class="nav-text">重定向</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lu Yan</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
